var HB=function(a){'use strict';var f=Math.sin,g=Math.cos,h=Math.floor,i=Math.sqrt,j=Math.PI;function b(b){return b===a.gl.FLOAT||b===a.gl.UNSIGNED_INT?4:b===a.gl.BYTE?1:void 0}function c(a,b="text",c){return fetch(a,{method:"GET"}).then(a=>a[b]()).then(a=>{c(a)}).catch(),{data:"",path:a}}function d(){console.log("Hummingbird v0.5.5 by SantaClausNL. https://www.santaclausnl.ga/");const a=document.createElement("p");a.innerText="LOADING...",a.style="margin: 0; position: absolute; top: 50%; left: 50%; font-size: 7em; transform: translate(-50%, -50%); font-family: Arial, Helvetica, sans-serif;",document.body.appendChild(a),new k,"function"==typeof setup&&setup(),v.init(a)}function e(b){if(a.deltaTime=b-a.prevTime,a.prevTime=b,a.camera.setMVP(),a.batch.begin(),"function"==typeof fixedUpdate)for(a.accumulator+=a.deltaTime;20<=a.accumulator;)fixedUpdate(),a.accumulator-=20;update(),a.batch.end(),a.frames++,requestAnimationFrame(e)}class k{constructor(){new l,new m,new n}static radians(a){return a*(j/180)}static degrees(a){return a*(180/j)}static dist(a,b,c,d){return i((c-a)*(c-a)+(d-b)*(d-b))}static map(a,b,c,d,e){return d+(e-d)*(a-b)/(c-b)}static random(a,b){return void 0===b?void 0===a?Math.random():Math.random()*a:Math.random()*(b-a)+a}static randomInt(a,b){return h(this.random(a,b))}static lerp(a,b,c){return a+c*(b-a)}static constrain(a,b,c){return a>c?c:a<b?b:a}static wrap(a,b,c){return a>c?b:a<b?c:a}static rectRectCollision(a,b,c,d){var e=Math.abs;return 2*e(a.x+b.x/2-(c.x+d.x/2))<b.x+d.x&&2*e(a.y+b.y/2-(c.y+d.y/2))<b.y+d.y}static rectCircleCollision(a,b,c,d){var e=Math.max,f=Math.min;const g=c.x-e(a.x,f(c.x,a.x+b.x)),h=c.y-e(a.y,f(c.y,a.y+b.y));return g*g+h*h<d*d}}class l{constructor(){l.zero={x:0,y:0},l.one={x:1,y:1}}static new(a=0,b=0){return{x:a,y:b}}static fromVec2(a){return{x:a.x,y:a.y}}static fromAngle(a,b=1){return{x:g(a)*b,y:f(a)*b}}static copy(a,b){a.x=b.x,a.y=b.y}static set(a,b,c){a.x=b,a.y=c}static add(a,b,c){a.x+=b,a.y+=c}static addVec2(a,b){a.x+=b.x,a.y+=b.y}static addScalar(a,b){a.x+=b,a.y+=b}static subtract(a,b,c){a.x-=b,a.y-=c}static subtractVec2(a,b){a.x-=b.x,a.y-=b.y}static subtractScalar(a,b){a.x-=b,a.y-=b}static multiply(a,b,c){a.x*=b,a.y*=c}static multiplyVec2(a,b){a.x*=b.x,a.y*=b.y}static multiplyScalar(a,b){a.x*=b,a.y*=b}static divide(a,b,c){a.x/=b,a.y/=c}static divideVec2(a,b){a.x/=b.x,a.y/=b.y}static divideScalar(a,b){a.x/=b,a.y/=b}static constrain(a,b,c,d,e){a.x=k.constrain(a.x,b,c),a.y=k.constrain(a.y,d,e)}static angleBetweenVec2(a,b){var c=Math.atan2;return c(b.y-a.y,b.x-a.x)}static distBetweenVec2(a,b){return i((b.x-a.x)*(b.x-a.x)+(b.y-a.y)*(b.y-a.y))}static collidesRect(a,b,c){return a.x<b.x+c.x&&a.x>b.x&&a.y<b.y+c.y&&a.y>b.y}}class m{constructor(){m.zero={x:0,y:0,z:0},m.one={x:1,y:1,z:1}}static new(a=0,b=0,c=0){return{x:a,y:b,z:c}}}class n{constructor(){n.zero={x:0,y:0,z:0,w:0},n.one={x:1,y:1,z:1,w:1},n.colors={},n.colors.white={x:1,y:1,z:1,w:1},n.colors.black={x:0,y:0,z:0,w:1},n.colors.red={x:1,y:0,z:0,w:1},n.colors.green={x:0,y:1,z:0,w:1},n.colors.blue={x:0,y:0,z:1,w:1},n.colors.yellow={x:1,y:1,z:0,w:1},n.colors.cyan={x:0,y:1,z:1,w:1},n.colors.magenta={x:1,y:0,z:1,w:1}}static new(a=0,b=0,c=0,d=0){return{x:a,y:b,z:c,w:d}}static set(a,b,c,d,e){a.x=b,a.y=c,a.z=d,a.w=e}static multVec4(a,b,c){a.x=b.x*c.x,a.y=b.y*c.y,a.z=b.z*c.z,a.w=b.w*c.w}static multMat4(a,b,c){a.x=b.x*c.aa+b.y*c.ba+b.z*c.ca+b.w*c.da,a.y=b.x*c.ab+b.y*c.bb+b.z*c.cb+b.w*c.db,a.z=b.x*c.ac+b.y*c.bc+b.z*c.cc+b.w*c.dc,a.w=b.x*c.ad+b.y*c.bd+b.z*c.cd+b.w*c.dd}}class o{static new(a=0){return{aa:a,ab:0,ac:0,ad:0,ba:0,bb:a,bc:0,bd:0,ca:0,cb:0,cc:a,cd:0,da:0,db:0,dc:0,dd:a}}static transpose(a){const b=a;a.aa=b.aa,a.ab=b.ba,a.ac=b.ca,a.ad=b.da,a.ba=b.ab,a.bb=b.bb,a.bc=b.cb,a.bd=b.db,a.ca=b.ac,a.cb=b.bc,a.cc=b.cc,a.cd=b.dc,a.da=b.ad,a.db=b.bd,a.dc=b.cd,a.dd=b.dd}static toArray(a){return[a.aa,a.ab,a.ac,a.ad,a.ba,a.bb,a.bc,a.bd,a.ca,a.cb,a.cc,a.cd,a.da,a.db,a.dc,a.dd]}static orthographic(a,b,c,d,e,f=-1,g=1){const h=c-b,i=d-e,j=g-f;a.aa=2/h,a.ab=0,a.ac=0,a.ad=-(c+b)/h,a.ba=0,a.bb=2/i,a.bc=0,a.bd=-(d+e)/i,a.ca=0,a.cb=0,a.cc=-2/j,a.cd=-(g+f)/j,a.da=0,a.db=0,a.dc=0,a.dd=1}static multMat4(a,b,c){a.aa=c.aa*b.aa+c.ab*b.ba+c.ac*b.ca+c.ad*b.da,a.ab=c.aa*b.ab+c.ab*b.bb+c.ac*b.cb+c.ad*b.db,a.ac=c.aa*b.ac+c.ab*b.bc+c.ac*b.cc+c.ad*b.dc,a.ad=c.aa*b.ad+c.ab*b.bd+c.ac*b.cd+c.ad*b.dd,a.ba=c.ba*b.aa+c.bb*b.ba+c.bc*b.ca+c.bd*b.da,a.bb=c.ba*b.ab+c.bb*b.bb+c.bc*b.cb+c.bd*b.db,a.bc=c.ba*b.ac+c.bb*b.bc+c.bc*b.cc+c.bd*b.dc,a.bd=c.ba*b.ad+c.bb*b.bd+c.bc*b.cd+c.bd*b.dd,a.ca=c.ca*b.aa+c.cb*b.ba+c.cc*b.ca+c.cd*b.da,a.cb=c.ca*b.ab+c.cb*b.bb+c.cc*b.cb+c.cd*b.db,a.cc=c.ca*b.ac+c.cb*b.bc+c.cc*b.cc+c.cd*b.dc,a.cd=c.ca*b.ad+c.cb*b.bd+c.cc*b.cd+c.cd*b.dd,a.da=c.da*b.aa+c.db*b.ba+c.dc*b.ca+c.dd*b.da,a.db=c.da*b.ab+c.db*b.bb+c.dc*b.cb+c.dd*b.db,a.dc=c.da*b.ac+c.db*b.bc+c.dc*b.cc+c.dd*b.dc,a.dd=c.da*b.ad+c.db*b.bd+c.dc*b.cd+c.dd*b.dd}static scale(a,b,c){this.multMat4(a,b,{aa:c,ab:0,ac:0,ad:0,ba:0,bb:c,bc:0,bd:0,ca:0,cb:0,cc:c,cd:0,da:0,db:0,dc:0,dd:1})}static translate(a,b,c){this.multMat4(a,b,{aa:1,ab:0,ac:0,ad:c.x,ba:0,bb:1,bc:0,bd:c.y,ca:0,cb:0,cc:1,cd:c.z,da:0,db:0,dc:0,dd:1})}static rotate(a,b,c,d){const e=f(d/2),h=c.x*e,i=c.y*e,j=c.z*e,k=g(d/2),l=h+h,m=i+i,n=j+j,o=h*l,p=i*l,q=i*m,r=j*l,s=j*m,t=j*n,u=k*l,v=k*m,w=k*n;this.multMat4(a,b,{aa:1-q-t,ab:p+w,ac:r-v,ad:0,ba:p-w,bb:1-o-t,bc:s+u,bd:0,ca:r+v,cb:s+u,cc:1-o-q,cd:0,da:0,db:0,dc:0,dd:1})}static rotateX(a,b,c){this.multMat4(a,b,{aa:1,ab:0,ac:0,ad:0,ba:0,bb:g(-c),bc:f(c),bd:0,ca:0,cb:f(-c),cc:g(-c),cd:0,da:0,db:0,dc:0,dd:1})}static rotateY(a,b,c){this.multMat4(a,b,{aa:g(-c),ab:0,ac:f(-c),ad:0,ba:0,bb:1,bc:0,bd:0,ca:f(c),cb:0,cc:g(-c),cd:0,da:0,db:0,dc:0,dd:1})}static rotateZ(a,b,c){this.multMat4(a,b,{aa:g(-c),ab:f(c),ac:0,ad:0,ba:f(-c),bb:g(-c),bc:0,bd:0,ca:0,cb:0,cc:1,cd:0,da:0,db:0,dc:0,dd:1})}}a.shader=void 0;class p{constructor(a,b){this.vertexShaderSource=a||`#version 300 es
			in vec4 aVertexPosition;
			in vec4 aVertexColor;
			in vec2 aTexturePosition;
			in float aTextureId;
			in float aTextSize;

			out vec4 vScreenPosition;
			out vec4 vVertexColor;
			out vec2 vTexturePosition;
			out float vTextureId;
			out float vTextSize;

			uniform mat4 uMVP;

			void main() {
				vScreenPosition = uMVP * aVertexPosition;
				gl_Position = vScreenPosition;
				vVertexColor = aVertexColor;
				vTexturePosition = aTexturePosition;
				vTextureId = aTextureId;
				vTextSize = aTextSize;
			}
		`,this.fragmentShaderSource=b||`#version 300 es
			precision mediump float;
			in vec4 vScreenPosition;
			in vec4 vVertexColor;
			in vec2 vTexturePosition;
			in float vTextureId;
			in float vTextSize;

			uniform sampler2D uTextureIds[16];

			out vec4 pixelColor;

			void main() {
				vec4 texSample;
				switch(int(vTextureId)) {
					case 0: texSample = texture(uTextureIds[0], vTexturePosition); break;
					case 1: texSample = texture(uTextureIds[1], vTexturePosition); break;
					case 2: texSample = texture(uTextureIds[2], vTexturePosition); break;
					case 3: texSample = texture(uTextureIds[3], vTexturePosition); break;
					case 4: texSample = texture(uTextureIds[4], vTexturePosition); break;
					case 5: texSample = texture(uTextureIds[5], vTexturePosition); break;
					case 6: texSample = texture(uTextureIds[6], vTexturePosition); break;
					case 7: texSample = texture(uTextureIds[7], vTexturePosition); break;
					case 8: texSample = texture(uTextureIds[8], vTexturePosition); break;
					case 9: texSample = texture(uTextureIds[9], vTexturePosition); break;
					case 10: texSample = texture(uTextureIds[10], vTexturePosition); break;
					case 11: texSample = texture(uTextureIds[11], vTexturePosition); break;
					case 12: texSample = texture(uTextureIds[12], vTexturePosition); break;
					case 13: texSample = texture(uTextureIds[13], vTexturePosition); break;
					case 14: texSample = texture(uTextureIds[14], vTexturePosition); break;
					case 15: texSample = texture(uTextureIds[15], vTexturePosition); break;
				}
				if(vTextSize <= 0.0) {
					// float dist = distance(vec4(0.0, 0.0, 0.0, 1.0), vScreenPosition);
					// vec4 color = texSample * vVertexColor;
					// pixelColor = vec4(color.rgb, smoothstep(0.75, 0.5, dist)*color.a);
					pixelColor = vVertexColor * texSample;
				} else {
					float sigDist = max(min(texSample.r, texSample.g), min(max(texSample.r, texSample.g), texSample.b)) - 0.5;
					float alpha = clamp(sigDist/fwidth(sigDist) + 0.4, 0.0, 1.0);
					pixelColor = vec4(vVertexColor.rgb, alpha * vVertexColor.a);
				}
			}
		`,this.id=this.createProgram(this.vertexShaderSource,this.fragmentShaderSource),this.attribLocationCache={},this.uniformLocationCache={}}static init(){a.shader=new p}createProgram(b,c){const d=a.gl.createProgram(),e=this.compileShader(a.gl.VERTEX_SHADER,b),f=this.compileShader(a.gl.FRAGMENT_SHADER,c);return a.gl.attachShader(d,e),a.gl.attachShader(d,f),a.gl.linkProgram(d),a.gl.validateProgram(d),a.gl.deleteShader(e),a.gl.deleteShader(f),d}compileShader(b,c){const d=a.gl.createShader(b);return a.gl.shaderSource(d,c),a.gl.compileShader(d),!1===a.gl.getShaderParameter(d,a.gl.COMPILE_STATUS)?(console.error(a.gl.getShaderInfoLog(d)),a.gl.deleteShader(d),null):d}getAttribLocation(b){return void 0===this.attribLocationCache[b]&&(this.attribLocationCache[b]=a.gl.getAttribLocation(this.id,b)),this.attribLocationCache[b]}getUniformLocation(b){return void 0===this.uniformLocationCache[b]&&(this.uniformLocationCache[b]=a.gl.getUniformLocation(this.id,b)),this.uniformLocationCache[b]}setUniform(b,c,d){a.gl["uniform"+d.length+b](this.getUniformLocation(c),d[0],d[1],d[2],d[3])}setUniformArray(b,c,d,e=1){a.gl["uniform"+e+b+"v"](this.getUniformLocation(c),d)}setUniformMatrix(b,c,d){const e=o.toArray(d);a.gl["uniformMatrix"+i(e.length)+b+"v"](this.getUniformLocation(c),!0,e)}bind(){a.gl.useProgram(this.id)}unbind(){a.gl.useProgram(null)}delete(){this.unbind(),a.gl.deleteProgram(this.id)}}a.camera=void 0;class q{constructor(){a.gl.viewport(0,0,a.canvas.width,a.canvas.height),this.MVP=o.new(),this.projectionMatrix=o.new(),o.orthographic(this.projectionMatrix,0,a.canvas.width,0,a.canvas.height,-1,1),this.viewMatrix=o.new(1)}static init(){a.camera=new q}setMVP(b=void 0){void 0===b?(o.multMat4(this.MVP,this.viewMatrix,this.projectionMatrix),a.shader.setUniformMatrix("f","uMVP",this.MVP)):a.shader.setUniformMatrix("f","uMVP",b)}translate(a){o.translate(this.viewMatrix,this.viewMatrix,a)}zoom(b){o.translate(this.viewMatrix,this.viewMatrix,m.new(-a.canvas.center.x,-a.canvas.center.y)),o.scale(this.viewMatrix,this.viewMatrix,1+b),o.translate(this.viewMatrix,this.viewMatrix,m.new(a.canvas.center.x,a.canvas.center.y))}rotate(b){o.translate(this.viewMatrix,this.viewMatrix,m.new(-a.canvas.center.x,-a.canvas.center.y)),o.rotateZ(this.viewMatrix,this.viewMatrix,b),o.translate(this.viewMatrix,this.viewMatrix,m.new(a.canvas.center.x,a.canvas.center.y))}}a.vertexArray=void 0,a.vertexStride=void 0,a.vertexBuffer=void 0,a.vertices=void 0,a.indexBuffer=void 0,a.indices=void 0;class r{constructor(b){this.type=a.gl.ARRAY_BUFFER,this.id=a.gl.createBuffer(),this.bind(),a.gl.bufferData(this.type,b,a.gl.DYNAMIC_DRAW)}static init(){a.vertices=new Float32Array(w*a.vertexStride),a.vertexBuffer=new r(a.vertices)}write(b){a.gl.bufferSubData(this.type,0,b)}partialWrite(b,c){a.gl.bufferSubData(this.type,0,b,0,c)}bind(){a.gl.bindBuffer(this.type,this.id)}unbind(){a.gl.bindBuffer(this.type,null)}delete(){this.unbind(),a.gl.deleteBuffer(this.id)}}class s{constructor(b){this.type=a.gl.ELEMENT_ARRAY_BUFFER,this.id=a.gl.createBuffer(),this.bind(),a.gl.bufferData(this.type,b,a.gl.DYNAMIC_DRAW)}static init(){a.indices=new Uint32Array(x),a.indexBuffer=new s(a.indices)}write(b){a.gl.bufferSubData(this.type,0,b)}partialWrite(b,c){a.gl.bufferSubData(this.type,0,b,0,c)}bind(){a.gl.bindBuffer(this.type,this.id)}unbind(){a.gl.bindBuffer(this.type,null)}delete(){this.unbind(),a.gl.deleteBuffer(this.id)}}class t{constructor(){this.id=a.gl.createVertexArray(),a.gl.bindVertexArray(this.id);this.layout=new class{constructor(){this.elements=[],this.stride=0,a.vertexStride=0}add(c,d,e,f=!1){a.vertexStride+=e;const g=a.shader.getAttribLocation(c);return-1!==g&&this.elements.push({index:g,type:d,count:e,normalized:f}),this.stride+=e*b(d),g}clear(){this.elements=[],this.stride=0}}}static init(){a.vertexArray=new t,a.vertexArray.layout.add("aVertexPosition",a.gl.FLOAT,2),a.vertexArray.layout.add("aVertexColor",a.gl.FLOAT,4),a.vertexArray.layout.add("aTexturePosition",a.gl.FLOAT,2),a.vertexArray.layout.add("aTextureId",a.gl.FLOAT,1),a.vertexArray.layout.add("aTextSize",a.gl.FLOAT,1),r.init(),a.vertexArray.addBuffer(a.vertexBuffer),s.init()}addBuffer(c){this.bind(),c.bind();let d=0;this.layout.elements.forEach(c=>{a.gl.enableVertexAttribArray(c.index),a.gl.vertexAttribPointer(c.index,c.count,c.type,c.normalized,this.layout.stride,d),d+=c.count*b(c.type)})}bind(){a.gl.bindVertexArray(this.id)}unbind(){a.gl.bindVertexArray(null)}delete(){this.unbind(),a.vertexArray.layout.elements.forEach(b=>a.gl.disableVertexAttribArray(b.index)),a.gl.deleteVertexArray(this.id)}}const u={};a.fontData=void 0,a.font=void 0;class v{constructor(b,c,d=u,e=function(){console.log("Texture loaded: "+this.name)}){this.id=a.gl.createTexture(),this.createTexture(c),this.name=b,void 0===d?u[this.name]=this:Array.isArray(d)?d.push(this):d instanceof Object&&(d[this.name]=this),this.onLoadCallback=e}static init(b){c("https://projects.santaclausnl.ga/Hummingbird/assets/arial.json","json",c=>{a.fontData=c,b.remove(),"function"==typeof e&&!1===a.noUpdate&&requestAnimationFrame(e)});const d=new Image;d.onload=d.onerror=()=>a.font=new v("Hummingbird_Font-Atlas","https://projects.santaclausnl.ga/Hummingbird/assets/arial."+(2===d.height?"webp":"png")),d.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA";const f=1e3,g=new Uint8Array(4000000);for(let a=0;a<f;a++)for(let b=0;b<f;b++){const c=4*(a*f+b);500>k.dist(a,b,500,500)?(g[c]=255,g[c+1]=255,g[c+2]=255,g[c+3]=255):(g[c]=0,g[c+1]=0,g[c+2]=0,g[c+3]=0)}new v("Hummingbird_Circle"),u.Hummingbird_Circle.bind(),u.Hummingbird_Circle.setTextureParameters(a.gl.LINEAR,a.gl.CLAMP_TO_EDGE),a.gl.texImage2D(a.gl.TEXTURE_2D,0,a.gl.RGBA8,1000,1000,0,a.gl.RGBA,a.gl.UNSIGNED_BYTE,g),u.Hummingbird_Circle.onLoadCallback();const h=[];for(let a=0;16>a;a++)h[a]=a;a.shader.setUniformArray("i","uTextureIds",h);{const b=a.gl.createTexture();a.gl.activeTexture(a.gl.TEXTURE0),a.gl.bindTexture(a.gl.TEXTURE_2D,b),a.gl.texParameteri(a.gl.TEXTURE_2D,a.gl.TEXTURE_MIN_FILTER,a.gl.NEAREST),a.gl.texParameteri(a.gl.TEXTURE_2D,a.gl.TEXTURE_MAG_FILTER,a.gl.NEAREST),a.gl.texParameteri(a.gl.TEXTURE_2D,a.gl.TEXTURE_WRAP_S,a.gl.REPEAT),a.gl.texParameteri(a.gl.TEXTURE_2D,a.gl.TEXTURE_WRAP_T,a.gl.REPEAT),a.gl.texImage2D(a.gl.TEXTURE_2D,0,a.gl.RGBA8,1,1,0,a.gl.RGBA,a.gl.UNSIGNED_BYTE,new Uint8Array([255,255,255,255]))}}setErrorTexture(){const b=new Uint8Array([255,255,255,255,191,191,191,255,191,191,191,255,255,255,255,255]);this.setTextureParameters(a.gl.NEAREST,a.gl.REPEAT),a.gl.texImage2D(a.gl.TEXTURE_2D,0,a.gl.RGBA8,2,2,0,a.gl.RGBA,a.gl.UNSIGNED_BYTE,b)}createTexture(b){if(this.bind(),this.setErrorTexture(),void 0===b)return;const c=new Image;c.onload=()=>{this.bind(),this.setTextureParameters(a.gl.LINEAR,a.gl.CLAMP_TO_EDGE),a.gl.texImage2D(a.gl.TEXTURE_2D,0,a.gl.RGBA8,a.gl.RGBA,a.gl.UNSIGNED_BYTE,c),this.onLoadCallback()},c.src=b}setTextureParameters(b,c){a.gl.texParameteri(a.gl.TEXTURE_2D,a.gl.TEXTURE_MIN_FILTER,b),a.gl.texParameteri(a.gl.TEXTURE_2D,a.gl.TEXTURE_MAG_FILTER,b),a.gl.texParameteri(a.gl.TEXTURE_2D,a.gl.TEXTURE_WRAP_S,c),a.gl.texParameteri(a.gl.TEXTURE_2D,a.gl.TEXTURE_WRAP_T,c)}bind(b=1){a.gl.activeTexture(a.gl["TEXTURE"+b]),a.gl.bindTexture(a.gl.TEXTURE_2D,this.id)}unbind(){a.gl.bindTexture(a.gl.TEXTURE_2D,null)}delete(){this.unbind(),a.gl.deleteTexture(this.id)}}a.batch=void 0;const w=4e3,x=6e3;class y{constructor(){this.vertexCount=0,this.indexCount=0,this.textureIndex=1,this.textureCache={}}static init(){a.batch=new y}begin(){this.reset()}end(){this.flush()}reset(){this.vertexCount=0,this.indexCount=0,this.textureIndex=1,this.textureCache={}}drawColoredPoint(a,b=1,c){this.pushQuad(a.x-b/4,a.y-b/4,b/2,b/2,0,c)}drawColoredPolygon(b,c,d=0){for(let e=0;e<b.length-1;e++){if(e===d)continue;(this.vertexCount+3>=w||this.indexCount+3>=x)&&this.flush();const f=this.vertexCount*a.vertexStride;a.vertices[f]=b[d].x,a.vertices[f+1]=b[d].y,a.vertices[f+2]=c.x,a.vertices[f+3]=c.y,a.vertices[f+4]=c.z,a.vertices[f+5]=c.w,a.vertices[f+6]=0,a.vertices[f+7]=1,a.vertices[f+8]=0,a.vertices[f+9]=0,a.vertices[f+10]=b[e].x,a.vertices[f+11]=b[e].y,a.vertices[f+12]=c.x,a.vertices[f+13]=c.y,a.vertices[f+14]=c.z,a.vertices[f+15]=c.w,a.vertices[f+16]=.5,a.vertices[f+17]=.5,a.vertices[f+18]=0,a.vertices[f+19]=0,a.vertices[f+20]=b[e+1].x,a.vertices[f+21]=b[e+1].y,a.vertices[f+22]=c.x,a.vertices[f+23]=c.y,a.vertices[f+24]=c.z,a.vertices[f+25]=c.w,a.vertices[f+26]=1,a.vertices[f+27]=1,a.vertices[f+28]=0,a.vertices[f+29]=0,a.indices[this.indexCount]=this.vertexCount,a.indices[this.indexCount+1]=this.vertexCount+1,a.indices[this.indexCount+2]=this.vertexCount+2,this.vertexCount+=3,this.indexCount+=3}}drawColoredRect(a,b,c){this.pushQuad(a.x,a.y,b.x,b.y,0,c)}drawTexturedRect(a,b,c){this.pushQuad(a.x,a.y,b.x,b.y,this.getTextureIndex(c))}drawColoredRectWithRotation(a,b,c,d){this.drawRectWithRotation(a,b,c,0,d)}drawTexturedRectWithRotation(a,b,c,d){this.drawRectWithRotation(a,b,c,this.getTextureIndex(d))}drawRectWithRotation(a,b,c,d=0,e=HB.Vec4.one){c=HB.Math.radians(c);const h=-.5*b.x*g(c),i=-.5*b.y*g(c),j=.5*b.x*g(c),k=.5*b.y*g(c),l=-.5*b.x*f(c),m=-.5*b.y*f(c),n=.5*b.x*f(c),o=.5*b.y*f(c);this.pushArbitraryQuad(h-m+a.x+b.x/2,l+i+a.y+b.y/2,j-m+a.x+b.x/2,n+i+a.y+b.y/2,j-o+a.x+b.x/2,n+k+a.y+b.y/2,h-o+a.x+b.x/2,l+k+a.y+b.y/2,d,e)}drawColoredLine(a,b,c,d){(this.vertexCount+4>=w||this.indexCount+6>=x)&&this.flush();const e=l.angleBetweenVec2(a,b),f=l.fromAngle(e-j/2,c/2),g=l.fromAngle(e+j/2,c/2);this.pushArbitraryQuad(a.x-f.x,a.y-f.y,a.x+f.x,a.y+f.y,b.x-g.x,b.y-g.y,b.x+g.x,b.y+g.y,0,d)}drawColoredEllipse(a,b,c){this.pushQuad(a.x,a.y,b.x,b.y,this.getTextureIndex(u.Hummingbird_Circle),c)}drawColoredText(b,c,d=12,e="start-start",f){const g=[],h={};d/=a.fontData.info.size;let i=0;const j=a.fontData.info.size*d;let k;for(let j of b)for(let b of a.fontData.chars)if(b.char===j){if(void 0!==k)for(let c of a.fontData.kernings)if(c[0]===k&&c[1]===b.id){i+=c.amt*d,h[b.id]=c;break}k=b.id,g.push(b),i+=b.xadv*d;break}let l=0,m=0;switch(e=e.split("-"),e[0]){case"start":break;case"center":l=-i/2;break;case"end":l=-i;}switch(e[1]){case"start":break;case"center":m=-j/2;break;case"end":m=-j;}let n=this.getTextureIndex(a.font);for(let i of g)void 0!==h[i.id]&&(l+=h[i.id].amt*d),this.pushQuad(c.x+i.xoff*d+l,c.y+i.yoff*d+m,i.w*d,i.h*d,n,f,d,i.x/a.fontData.common.scaleW,i.y/a.fontData.common.scaleH,i.w/a.fontData.common.scaleW,i.h/a.fontData.common.scaleH),l+=i.xadv*d}pushQuad(a,b,c,d,e,f,g,h,i,j,k){this.pushArbitraryQuad(a,b,a+c,b,a+c,b+d,a,b+d,e,f,g,h,i,j,k)}pushArbitraryQuad(b,c,d,e,f,g,h,i,j=0,k=HB.Vec4.one,l=0,m=0,n=0,o=1,p=1){(this.vertexCount+4>=w||this.indexCount+6>=x)&&this.flush();const q=this.vertexCount*a.vertexStride;a.vertices[q]=b,a.vertices[q+1]=c,a.vertices[q+2]=k.x,a.vertices[q+3]=k.y,a.vertices[q+4]=k.z,a.vertices[q+5]=k.w,a.vertices[q+6]=m,a.vertices[q+7]=n,a.vertices[q+8]=j,a.vertices[q+9]=l,a.vertices[q+10]=d,a.vertices[q+11]=e,a.vertices[q+12]=k.x,a.vertices[q+13]=k.y,a.vertices[q+14]=k.z,a.vertices[q+15]=k.w,a.vertices[q+16]=m+o,a.vertices[q+17]=n,a.vertices[q+18]=j,a.vertices[q+19]=l,a.vertices[q+20]=f,a.vertices[q+21]=g,a.vertices[q+22]=k.x,a.vertices[q+23]=k.y,a.vertices[q+24]=k.z,a.vertices[q+25]=k.w,a.vertices[q+26]=m+o,a.vertices[q+27]=n+p,a.vertices[q+28]=j,a.vertices[q+29]=l,a.vertices[q+30]=h,a.vertices[q+31]=i,a.vertices[q+32]=k.x,a.vertices[q+33]=k.y,a.vertices[q+34]=k.z,a.vertices[q+35]=k.w,a.vertices[q+36]=m,a.vertices[q+37]=n+p,a.vertices[q+38]=j,a.vertices[q+39]=l,a.indices[this.indexCount]=this.vertexCount,a.indices[this.indexCount+1]=this.vertexCount+1,a.indices[this.indexCount+2]=this.vertexCount+2,a.indices[this.indexCount+3]=this.vertexCount+2,a.indices[this.indexCount+4]=this.vertexCount+3,a.indices[this.indexCount+5]=this.vertexCount,this.vertexCount+=4,this.indexCount+=6}getTextureIndex(a){let b=this.textureCache[a.name];return void 0===b&&(16<=this.textureIndex+1&&this.flush(),this.textureCache[a.name]=b=this.textureIndex,a.bind(this.textureIndex++)),b}flush(){a.vertexBuffer.partialWrite(a.vertices,this.vertexCount*a.vertexStride),a.indexBuffer.partialWrite(a.indices,this.indexCount),a.renderer.draw(this.indexCount),this.reset()}}a.renderer=void 0;class z{constructor(){a.gl.blendFunc(a.gl.SRC_ALPHA,a.gl.ONE_MINUS_SRC_ALPHA),a.gl.enable(a.gl.BLEND),a.gl.cullFace(a.gl.FRONT),a.gl.enable(a.gl.CULL_FACE),p.init(),a.shader.bind(),y.init(),t.init(),q.init()}static init(){a.renderer=new z}clear(b){a.gl.clearColor(b.x,b.y,b.z,b.w),a.gl.clear(a.gl.COLOR_BUFFER_BIT)}draw(b){a.shader.bind(),a.vertexArray.bind(),a.gl.drawElements(a.gl.TRIANGLES,b,a.gl.UNSIGNED_INT,0)}delete(){Object.values(u).forEach(a=>{a.delete()}),a.shader.delete(),a.vertexArray.delete(),a.vertexBuffer.delete(),a.indexBuffer.delete()}}a.noUpdate=!1,a.deltaTime=0,a.accumulator=0;a.frames=0,a.prevTime=0;const A={x:0,y:0};a.mouseIsPressed=!1;const B={};return a.canvas=void 0,a.gl=void 0,window.addEventListener("load",d),a.Batch=y,a.Camera=q,a.IndexBuffer=s,a.Mat4=o,a.Math=k,a.Noise=class{constructor(a=1,b=.05){this.vertices=256,this.amp=a,this.scl=b,this.r=[];for(let c=0;c<this.vertices;c++)this.r.push(Math.random())}value(a){const b=a*this.scl,c=h(b),d=b-c,e=c&this.vertices-1,f=e+1&this.vertices-1;return k.lerp(this.r[e],this.r[f],d*d*(3-2*d))*this.amp}},a.Renderer=z,a.Shader=p,a.Texture=v,a.Vec2=l,a.Vec3=m,a.Vec4=n,a.VertexArray=t,a.VertexBuffer=r,a.bytes=b,a.fixedUpdateFrequency=50,a.init=function(b=100,c=100,d){if(void 0===d&&(d={}),!0===d.noUpdate&&(a.noUpdate=!0),void 0===d.canvas?(a.canvas=document.createElement("CANVAS"),a.gl=a.canvas.getContext("webgl2"),void 0===d.parent?document.body.appendChild(a.canvas):d.parent.appendChild(a.canvas)):(a.canvas=d.canvas,a.gl=a.canvas.getContext("webgl2")),null===a.gl){a.canvas.parentNode.removeChild(a.canvas);const b=document.createElement("p");b.innerText="WebGL2 is not supported on your browser or machine.",void 0===d.parent?document.body.appendChild(b):d.parent.appendChild(b)}else a.canvas.width=b,a.canvas.height=c,a.canvas.size=l.new(a.canvas.width,a.canvas.height),a.canvas.center=l.new(a.canvas.width/2,a.canvas.height/2),a.canvas.id=void 0===d.id?"HummingbirdCanvas":d.id,a.canvas.setAttribute("alt","Hummingbird canvas element."),z.init();window.addEventListener("keydown",a=>{B[a.keyCode]=!0,"function"==typeof keyPressed&&keyPressed(a)}),window.addEventListener("keyup",a=>{B[a.keyCode]=!1,"function"==typeof keyReleased&&keyReleased(a)}),window.addEventListener("mousemove",b=>{const c=a.canvas.getBoundingClientRect();l.set(A,b.clientX-c.left-document.body.scrollLeft,b.clientY-c.top-document.body.scrollTop),"function"==typeof mouseMoved&&mouseMoved(b)}),window.addEventListener("mousedown",b=>{a.mouseIsPressed=!0,"function"==typeof mousePressed&&mousePressed(b)}),window.addEventListener("mouseup",b=>{a.mouseIsPressed=!1,"function"==typeof mouseReleased&&mouseReleased(b)}),"function"==typeof windowResized&&window.addEventListener("resize",a=>{windowResized(a)})},a.keysPressed=B,a.loadFile=c,a.maxIndexCount=x,a.maxVertexCount=4000,a.mousePos=A,a.resizeCanvas=function(b=100,c=100){a.canvas.width=b,a.canvas.height=c,l.set(a.canvas.size,a.canvas.width,a.canvas.height),l.set(a.canvas.center,a.canvas.width/2,a.canvas.height/2),a.gl.viewport(0,0,a.canvas.width,a.canvas.height),o.orthographic(a.camera.projectionMatrix,0,a.canvas.width,0,a.canvas.height)},a.setup=d,a.textures=u,a.update=e,a.version="v0.5.5",a}({});