var HB=function(a){'use strict';var f=Math.sin,g=Math.cos,h=Math.floor,i=Math.PI,j=Math.sqrt;function b(b){return b===a.gl.FLOAT||b===a.gl.UNSIGNED_INT?4:b===a.gl.BYTE?1:void 0}function c(a,b,c){return fetch(a,{method:"GET"}).then(a=>a[b]()).then(a=>{c(a)}).catch(),{data:"",path:a}}function d(){console.log("Hummingbird v0.4.0 by SantaClausNL. https://www.santaclausnl.ga/");const a=document.createElement("p");a.innerText="LOADING...",a.style="margin: 0; position: absolute; top: 50%; left: 50%; font-size: 7em; transform: translate(-50%, -50%); font-family: Arial, Helvetica, sans-serif;",document.body.appendChild(a),new l,"function"==typeof setup&&setup(),v.init(a)}function e(b){if(a.deltaTime=b-a.prevTime,a.prevTime=b,a.camera.setMVP(),a.batch.begin(),"function"==typeof fixedUpdate)for(a.accumulator+=a.deltaTime;20<=a.accumulator;)fixedUpdate(),a.accumulator-=20;update(),a.batch.end(),a.frames++,requestAnimationFrame(e)}a.shader=void 0;class k{constructor(a,b){this.vertexShaderSource=a||`#version 300 es
			in vec4 aVertexPosition;
			in vec4 aVertexColor;
			in vec2 aTexturePosition;
			in float aTextureId;
			in float aTextSize;

			out vec4 vVertexColor;
			out vec2 vTexturePosition;
			out float vTextureId;
			out float vTextSize;

			uniform mat4 uMVP;

			void main() {
				gl_Position = uMVP * aVertexPosition;
				vVertexColor = aVertexColor;
				vTexturePosition = aTexturePosition;
				vTextureId = aTextureId;
				vTextSize = aTextSize;
			}
		`,this.fragmentShaderSource=b||`#version 300 es
			precision mediump float;
			in vec4 vVertexColor;
			in vec2 vTexturePosition;
			in float vTextureId;
			in float vTextSize;

			uniform sampler2D uTextureIds[16];

			out vec4 pixelColor;

			void main() {
				vec4 texSample;
				switch(int(vTextureId)) {
					case 0: texSample = texture(uTextureIds[0], vTexturePosition); break;
					case 1: texSample = texture(uTextureIds[1], vTexturePosition); break;
					case 2: texSample = texture(uTextureIds[2], vTexturePosition); break;
					case 3: texSample = texture(uTextureIds[3], vTexturePosition); break;
					case 4: texSample = texture(uTextureIds[4], vTexturePosition); break;
					case 5: texSample = texture(uTextureIds[5], vTexturePosition); break;
					case 6: texSample = texture(uTextureIds[6], vTexturePosition); break;
					case 7: texSample = texture(uTextureIds[7], vTexturePosition); break;
					case 8: texSample = texture(uTextureIds[8], vTexturePosition); break;
					case 9: texSample = texture(uTextureIds[9], vTexturePosition); break;
					case 10: texSample = texture(uTextureIds[10], vTexturePosition); break;
					case 11: texSample = texture(uTextureIds[11], vTexturePosition); break;
					case 12: texSample = texture(uTextureIds[12], vTexturePosition); break;
					case 13: texSample = texture(uTextureIds[13], vTexturePosition); break;
					case 14: texSample = texture(uTextureIds[14], vTexturePosition); break;
					case 15: texSample = texture(uTextureIds[15], vTexturePosition); break;
				}
				if(vTextSize <= 0.0) {
					pixelColor = texSample * vVertexColor;
				} else {
					float sigDist = max(min(texSample.r, texSample.g), min(max(texSample.r, texSample.g), texSample.b)) - 0.5;
					float alpha = clamp(sigDist/fwidth(sigDist) + 0.4, 0.0, 1.0);
					pixelColor = vec4(vVertexColor.rgb, alpha * vVertexColor.a);
				}
			}
		`,this.id=this.createProgram(this.vertexShaderSource,this.fragmentShaderSource),this.attribLocationCache={},this.uniformLocationCache={}}static init(){a.shader=new k}createProgram(b,c){const d=a.gl.createProgram(),e=this.compileShader(a.gl.VERTEX_SHADER,b),f=this.compileShader(a.gl.FRAGMENT_SHADER,c);return a.gl.attachShader(d,e),a.gl.attachShader(d,f),a.gl.linkProgram(d),a.gl.validateProgram(d),a.gl.deleteShader(e),a.gl.deleteShader(f),d}compileShader(b,c){const d=a.gl.createShader(b);return a.gl.shaderSource(d,c),a.gl.compileShader(d),!1===a.gl.getShaderParameter(d,a.gl.COMPILE_STATUS)?(console.error(a.gl.getShaderInfoLog(d)),a.gl.deleteShader(d),null):d}getAttribLocation(b){return void 0===this.attribLocationCache[b]&&(this.attribLocationCache[b]=a.gl.getAttribLocation(this.id,b)),this.attribLocationCache[b]}getUniformLocation(b){return void 0===this.uniformLocationCache[b]&&(this.uniformLocationCache[b]=a.gl.getUniformLocation(this.id,b)),this.uniformLocationCache[b]}setUniform(b,c,d){a.gl["uniform"+d.length+b](this.getUniformLocation(c),d[0],d[1],d[2],d[3])}setUniformArray(b,c,d,e=1){a.gl["uniform"+e+b+"v"](this.getUniformLocation(c),d)}setUniformMatrix(b,c,d){a.gl["uniformMatrix"+j(d.length)+b+"v"](this.getUniformLocation(c),!0,d)}bind(){a.gl.useProgram(this.id)}unbind(){a.gl.useProgram(null)}delete(){this.unbind(),a.gl.deleteProgram(this.id)}}class l{constructor(){new m,new n,new o}static radians(a){return a*(i/180)}static degrees(a){return a*(180/i)}static map(a,b,c,d,e){return d+(e-d)*(a-b)/(c-b)}static random(a,b){return void 0===b?void 0===a?Math.random():Math.random()*a:Math.random()*(b-a)+a}static randomInt(a,b){return h(this.random(a,b))}static lerp(a,b,c){return a+c*(b-a)}static constrain(a,b,c){return a>c?c:a<b?b:a}static wrap(a,b,c){return a>c?b:a<b?c:a}static rectRectCollision(a,b,c,d){var e=Math.abs;return 2*e(a[0]+b[0]/2-(c[0]+d[0]/2))<b[0]+d[0]&&2*e(a[1]+b[1]/2-(c[1]+d[1]/2))<b[1]+d[1]}}class m{constructor(){m.zero=[0,0],m.one=[1,1]}static new(a=0,b=0){return[a,b]}static fromVec2(a){return[a[0],a[1]]}static fromAngle(a,b=1){return this.new(g(a)*b,f(a)*b)}static copy(a,b){a[0]=b[0],a[1]=b[1]}static set(a,b,c){a[0]=b,a[1]=c}static add(a,b,c){a[0]+=b,a[1]+=c}static addVec2(a,b){a[0]+=b[0],a[1]+=b[1]}static addScalar(a,b){a[0]+=b,a[1]+=b}static subtract(a,b,c){a[0]-=b,a[1]-=c}static subtractVec2(a,b){a[0]-=b[0],a[1]-=b[1]}static subtractScalar(a,b){a[0]-=b,a[1]-=b}static multiply(a,b,c){a[0]*=b,a[1]*=c}static multiplyVec2(a,b){a[0]*=b[0],a[1]*=b[1]}static multiplyScalar(a,b){a[0]*=b,a[1]*=b}static divide(a,b,c){a[0]/=b,a[1]/=c}static divideVec2(a,b){a[0]/=b[0],a[1]/=b[1]}static divideScalar(a,b){a[0]/=b,a[1]/=b}static constrain(a,b,c,d,e){a[0]=l.constrain(a[0],b,c),a[1]=l.constrain(a[1],d,e)}static angleBetweenVec2(a,b){var c=Math.atan2;return c(b[1]-a[1],b[0]-a[0])}static distBetweenVec2(a,b){return j((b[0]-a[0])*(b[0]-a[0])+(b[1]-a[1])*(b[1]-a[1]))}static collidesRect(a,b,c){return a[0]<b[0]+c[0]&&a[0]>b[0]&&a[1]<b[1]+c[1]&&a[1]>b[1]}}class n{constructor(){n.zero=[0,0,0],n.one=[1,1,1]}static new(a=0,b=0,c=0){return[a,b,c]}}class o{constructor(){o.zero=[0,0,0,0],o.one=[1,1,1,1],o.colors={},o.colors.white=[1,1,1,1],o.colors.black=[0,0,0,1],o.colors.red=[1,0,0,1],o.colors.green=[0,1,0,1],o.colors.blue=[0,0,1,1],o.colors.yellow=[1,1,0,1],o.colors.cyan=[0,1,1,1],o.colors.magenta=[1,0,1,1]}static new(a=0,b=0,c=0,d=0){return[a,b,c,d]}static multVec4(a,b){return[a[0]*b[0],a[1]*b[1],a[2]*b[2],a[3]*b[3]]}static multMat4(a,b){return[a[0]*b[0]+a[1]*b[4]+a[2]*b[8]+a[3]*b[12],a[0]*b[1]+a[1]*b[5]+a[2]*b[9]+a[3]*b[13],a[0]*b[2]+a[1]*b[6]+a[2]*b[10]+a[3]*b[14],a[0]*b[3]+a[1]*b[7]+a[2]*b[11]+a[3]*b[15]]}}class p{static new(a=0){return[a,0,0,0,0,a,0,0,0,0,a,0,0,0,0,a]}static orthographic(a,b,c,d,e,f=-1,g=1){const h=c-b,i=d-e,j=g-f;a[0]=2/h,a[1]=0,a[2]=0,a[3]=-(c+b)/h,a[4]=0,a[5]=2/i,a[6]=0,a[7]=-(d+e)/i,a[8]=0,a[9]=0,a[10]=-2/j,a[11]=-(g+f)/j,a[12]=0,a[13]=0,a[14]=0,a[15]=1}static multMat4(a,b,c){const d=o.multMat4([c[0],c[1],c[2],c[3]],b),e=o.multMat4([c[4],c[5],c[6],c[7]],b),f=o.multMat4([c[8],c[9],c[10],c[11]],b),g=o.multMat4([c[12],c[13],c[14],c[15]],b);a[0]=d[0],a[1]=d[1],a[2]=d[2],a[3]=d[3],a[4]=e[0],a[5]=e[1],a[6]=e[2],a[7]=e[3],a[8]=f[0],a[9]=f[1],a[10]=f[2],a[11]=f[3],a[12]=g[0],a[13]=g[1],a[14]=g[2],a[15]=g[3]}static scale(a,b,c){this.multMat4(a,b,[c,0,0,0,0,c,0,0,0,0,c,0,0,0,0,1])}static translate(a,b,c){this.multMat4(a,b,[1,0,0,c[0],0,1,0,c[1],0,0,1,c[2],0,0,0,1])}static rotate(a,b,c,d){const e=c[0]*f(d/2),h=c[1]*f(d/2),i=c[2]*f(d/2),j=g(d/2),k=e+e,l=h+h,m=i+i,n=e*k,o=h*k,p=h*l,q=i*k,r=i*l,s=i*m,t=j*k,u=j*l,v=j*m;this.multMat4(a,b,[1-p-s,o+v,q-u,0,o-v,1-n-s,r+t,0,q+u,r+t,1-n-p,0,0,0,0,1])}static rotateX(a,b,c){this.multMat4(a,b,[1,0,0,0,0,g(-c),f(c),0,0,f(-c),g(-c),0,0,0,0,1])}static rotateY(a,b,c){this.multMat4(a,b,[g(-c),0,f(-c),0,0,1,0,0,f(c),0,g(-c),0,0,0,0,1])}static rotateZ(a,b,c){this.multMat4(a,b,[g(-c),f(c),0,0,f(-c),g(-c),0,0,0,0,1,0,0,0,0,1])}}a.camera=void 0;class q{constructor(){a.gl.viewport(0,0,a.canvas.width,a.canvas.height),this.projectionMatrix=p.new(1),p.orthographic(this.projectionMatrix,0,a.canvas.width,0,a.canvas.height,-1,1),this.viewMatrix=p.new(1),this.modelMatrix=p.new(1)}static init(){a.camera=new q}setMVP(b=void 0){if(void 0===b){const a=p.new(1);p.multMat4(a,this.modelMatrix,this.viewMatrix),b=p.new(1),p.multMat4(b,a,this.projectionMatrix)}a.shader.bind(),a.shader.setUniformMatrix("f","uMVP",b)}translate(a){p.translate(this.viewMatrix,this.viewMatrix,a)}zoom(b){p.translate(this.viewMatrix,this.viewMatrix,n.new(-a.canvas.center[0],-a.canvas.center[1])),p.scale(this.viewMatrix,this.viewMatrix,b),p.translate(this.viewMatrix,this.viewMatrix,n.new(a.canvas.center[0],a.canvas.center[1]))}rotate(b){p.translate(this.viewMatrix,this.viewMatrix,n.new(-a.canvas.center[0],-a.canvas.center[1])),p.rotateZ(this.viewMatrix,this.viewMatrix,b),p.translate(this.viewMatrix,this.viewMatrix,n.new(a.canvas.center[0],a.canvas.center[1]))}}a.vertexArray=void 0,a.vertexStride=void 0,a.vertexBuffer=void 0,a.vertices=void 0,a.indexBuffer=void 0,a.indices=void 0;class r{constructor(b){this.type=a.gl.ARRAY_BUFFER,this.id=a.gl.createBuffer(),this.bind(),a.gl.bufferData(this.type,b,a.gl.DYNAMIC_DRAW)}static init(){a.vertices=new Float32Array(w*a.vertexStride),a.vertexBuffer=new r(a.vertices)}write(b){a.gl.bufferSubData(this.type,0,b)}partialWrite(b,c){a.gl.bufferSubData(this.type,0,b,0,c)}bind(){a.gl.bindBuffer(this.type,this.id)}unbind(){a.gl.bindBuffer(this.type,null)}delete(){this.unbind(),a.gl.deleteBuffer(this.id)}}class s{constructor(b){this.type=a.gl.ELEMENT_ARRAY_BUFFER,this.id=a.gl.createBuffer(),this.bind(),a.gl.bufferData(this.type,b,a.gl.DYNAMIC_DRAW)}static init(){a.indices=new Uint32Array(x),a.indexBuffer=new s(a.indices)}write(b){a.gl.bufferSubData(this.type,0,b)}partialWrite(b,c){a.gl.bufferSubData(this.type,0,b,0,c)}bind(){a.gl.bindBuffer(this.type,this.id)}unbind(){a.gl.bindBuffer(this.type,null)}delete(){this.unbind(),a.gl.deleteBuffer(this.id)}}class t{constructor(){this.id=a.gl.createVertexArray(),a.gl.bindVertexArray(this.id);this.layout=new class{constructor(){this.elements=[],this.stride=0,a.vertexStride=0}add(c,d,e,f=!1){a.vertexStride+=e;const g=a.shader.getAttribLocation(c);return-1!==g&&this.elements.push({index:g,type:d,count:e,normalized:f}),this.stride+=e*b(d),g}clear(){this.elements=[],this.stride=0}}}static init(){a.vertexArray=new t,a.vertexArray.layout.add("aVertexPosition",a.gl.FLOAT,3),a.vertexArray.layout.add("aVertexColor",a.gl.FLOAT,4),a.vertexArray.layout.add("aTexturePosition",a.gl.FLOAT,2),a.vertexArray.layout.add("aTextureId",a.gl.FLOAT,1),a.vertexArray.layout.add("aTextSize",a.gl.FLOAT,1),r.init(),a.vertexArray.addBuffer(a.vertexBuffer),s.init()}addBuffer(c){this.bind(),c.bind();let d=0;this.layout.elements.forEach(c=>{a.gl.enableVertexAttribArray(c.index),a.gl.vertexAttribPointer(c.index,c.count,c.type,c.normalized,this.layout.stride,d),d+=c.count*b(c.type)})}bind(){a.gl.bindVertexArray(this.id)}unbind(){a.gl.bindVertexArray(null)}delete(){this.unbind(),a.vertexArray.layout.elements.forEach(b=>a.gl.disableVertexAttribArray(b.index)),a.gl.deleteVertexArray(this.id)}}const u={};a.fontData=void 0,a.font=void 0;class v{constructor(b,c,d=u,e=function(){console.log("Texture loaded: "+this.name)}){this.id=a.gl.createTexture(),this.createTexture(c),this.name=b,void 0===d?u[this.name]=this:Array.isArray(d)?d.push(this):d instanceof Object&&(d[this.name]=this),this.onLoadCallback=e}static init(b){c("https://projects.santaclausnl.ga/Hummingbird/assets/arial.json","json",c=>{a.fontData=c,b.remove(),"function"==typeof e&&!1===a.noUpdate&&requestAnimationFrame(e)});const d=new Image;d.onload=d.onerror=()=>a.font=new v("Hummingbird_Font-Atlas","https://projects.santaclausnl.ga/Hummingbird/assets/arial."+(2===d.height?"webp":"png"),null),d.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA";const f=[];for(let a=0;16>a;a++)f[a]=a;a.shader.setUniformArray("i","uTextureIds",f);{const b=a.gl.createTexture();a.gl.activeTexture(a.gl.TEXTURE0),a.gl.bindTexture(a.gl.TEXTURE_2D,b),a.gl.texParameteri(a.gl.TEXTURE_2D,a.gl.TEXTURE_MIN_FILTER,a.gl.NEAREST),a.gl.texParameteri(a.gl.TEXTURE_2D,a.gl.TEXTURE_MAG_FILTER,a.gl.NEAREST),a.gl.texParameteri(a.gl.TEXTURE_2D,a.gl.TEXTURE_WRAP_S,a.gl.REPEAT),a.gl.texParameteri(a.gl.TEXTURE_2D,a.gl.TEXTURE_WRAP_T,a.gl.REPEAT),a.gl.texImage2D(a.gl.TEXTURE_2D,0,a.gl.RGBA8,1,1,0,a.gl.RGBA,a.gl.UNSIGNED_BYTE,new Uint8Array([255,255,255,255]))}}setErrorTexture(){const b=new Uint8Array([255,255,255,255,191,191,191,255,191,191,191,255,255,255,255,255]);this.setTextureParameters(a.gl.NEAREST,a.gl.REPEAT),a.gl.texImage2D(a.gl.TEXTURE_2D,0,a.gl.RGBA8,2,2,0,a.gl.RGBA,a.gl.UNSIGNED_BYTE,b)}createTexture(b){if(this.bind(),this.setErrorTexture(),void 0===b)return;const c=new Image;c.onload=()=>{this.bind(),this.setTextureParameters(a.gl.LINEAR,a.gl.CLAMP_TO_EDGE),a.gl.texImage2D(a.gl.TEXTURE_2D,0,a.gl.RGBA8,a.gl.RGBA,a.gl.UNSIGNED_BYTE,c),this.onLoadCallback()},c.src=b}setTextureParameters(b,c){a.gl.texParameteri(a.gl.TEXTURE_2D,a.gl.TEXTURE_MIN_FILTER,b),a.gl.texParameteri(a.gl.TEXTURE_2D,a.gl.TEXTURE_MAG_FILTER,b),a.gl.texParameteri(a.gl.TEXTURE_2D,a.gl.TEXTURE_WRAP_S,c),a.gl.texParameteri(a.gl.TEXTURE_2D,a.gl.TEXTURE_WRAP_T,c)}bind(b=1){a.gl.activeTexture(a.gl["TEXTURE"+b]),a.gl.bindTexture(a.gl.TEXTURE_2D,this.id)}unbind(){a.gl.bindTexture(a.gl.TEXTURE_2D,null)}delete(){this.unbind(),a.gl.deleteTexture(this.id)}}a.batch=void 0;const w=2e3,x=3e3;class y{constructor(){this.vertexCount=0,this.indexCount=0,this.textureIndex=1,this.textureCache={}}static init(){a.batch=new y}begin(){this.reset()}end(){this.flush()}reset(){this.vertexCount=0,this.indexCount=0,this.textureIndex=1,this.textureCache={}}drawColoredRect(b,c,d){(this.vertexCount+4>=w||this.indexCount+6>=x)&&this.flush();const e=this.vertexCount*a.vertexStride;a.vertices[e]=b[0],a.vertices[e+1]=b[1],a.vertices[e+2]=0,a.vertices[e+3]=d[0],a.vertices[e+4]=d[1],a.vertices[e+5]=d[2],a.vertices[e+6]=d[3],a.vertices[e+7]=0,a.vertices[e+8]=0,a.vertices[e+9]=0,a.vertices[e+10]=0,a.vertices[e+11]=b[0]+c[0],a.vertices[e+12]=b[1],a.vertices[e+13]=0,a.vertices[e+14]=d[0],a.vertices[e+15]=d[1],a.vertices[e+16]=d[2],a.vertices[e+17]=d[3],a.vertices[e+18]=1,a.vertices[e+19]=0,a.vertices[e+20]=0,a.vertices[e+21]=0,a.vertices[e+22]=b[0]+c[0],a.vertices[e+23]=b[1]+c[1],a.vertices[e+24]=0,a.vertices[e+25]=d[0],a.vertices[e+26]=d[1],a.vertices[e+27]=d[2],a.vertices[e+28]=d[3],a.vertices[e+29]=1,a.vertices[e+30]=1,a.vertices[e+31]=0,a.vertices[e+32]=0,a.vertices[e+33]=b[0],a.vertices[e+34]=b[1]+c[1],a.vertices[e+35]=0,a.vertices[e+36]=d[0],a.vertices[e+37]=d[1],a.vertices[e+38]=d[2],a.vertices[e+39]=d[3],a.vertices[e+40]=0,a.vertices[e+41]=1,a.vertices[e+42]=0,a.vertices[e+43]=0,a.indices[this.indexCount]=this.vertexCount,a.indices[this.indexCount+1]=this.vertexCount+1,a.indices[this.indexCount+2]=this.vertexCount+2,a.indices[this.indexCount+3]=this.vertexCount+2,a.indices[this.indexCount+4]=this.vertexCount+3,a.indices[this.indexCount+5]=this.vertexCount,this.vertexCount+=4,this.indexCount+=6}drawTexturedRect(b,c,d){(this.vertexCount+4>=w||this.indexCount+6>=x)&&this.flush();let e=this.textureCache[d.name];void 0===e&&(16<=this.textureIndex+1&&this.flush(),this.textureCache[d.name]=e=this.textureIndex,d.bind(this.textureIndex++));const f=this.vertexCount*a.vertexStride;a.vertices[f]=b[0],a.vertices[f+1]=b[1],a.vertices[f+2]=0,a.vertices[f+3]=1,a.vertices[f+4]=1,a.vertices[f+5]=1,a.vertices[f+6]=1,a.vertices[f+7]=0,a.vertices[f+8]=0,a.vertices[f+9]=e,a.vertices[f+10]=0,a.vertices[f+11]=b[0]+c[0],a.vertices[f+12]=b[1],a.vertices[f+13]=0,a.vertices[f+14]=1,a.vertices[f+15]=1,a.vertices[f+16]=1,a.vertices[f+17]=1,a.vertices[f+18]=1,a.vertices[f+19]=0,a.vertices[f+20]=e,a.vertices[f+21]=0,a.vertices[f+22]=b[0]+c[0],a.vertices[f+23]=b[1]+c[1],a.vertices[f+24]=0,a.vertices[f+25]=1,a.vertices[f+26]=1,a.vertices[f+27]=1,a.vertices[f+28]=1,a.vertices[f+29]=1,a.vertices[f+30]=1,a.vertices[f+31]=e,a.vertices[f+32]=0,a.vertices[f+33]=b[0],a.vertices[f+34]=b[1]+c[1],a.vertices[f+35]=0,a.vertices[f+36]=1,a.vertices[f+37]=1,a.vertices[f+38]=1,a.vertices[f+39]=1,a.vertices[f+40]=0,a.vertices[f+41]=1,a.vertices[f+42]=e,a.vertices[f+43]=0,a.indices[this.indexCount]=this.vertexCount,a.indices[this.indexCount+1]=this.vertexCount+1,a.indices[this.indexCount+2]=this.vertexCount+2,a.indices[this.indexCount+3]=this.vertexCount+2,a.indices[this.indexCount+4]=this.vertexCount+3,a.indices[this.indexCount+5]=this.vertexCount,this.vertexCount+=4,this.indexCount+=6}drawColoredLine(b,c,d,e){(this.vertexCount+4>=w||this.indexCount+6>=x)&&this.flush();const f=m.angleBetweenVec2(b,c),g=m.fromAngle(f-i/2,d/2),h=m.fromAngle(f+i/2,d/2),j=this.vertexCount*a.vertexStride;a.vertices[j]=b[0]-g[0],a.vertices[j+1]=b[1]-g[1],a.vertices[j+2]=0,a.vertices[j+3]=e[0],a.vertices[j+4]=e[1],a.vertices[j+5]=e[2],a.vertices[j+6]=e[3],a.vertices[j+7]=0,a.vertices[j+8]=0,a.vertices[j+9]=0,a.vertices[j+10]=0,a.vertices[j+11]=b[0]+g[0],a.vertices[j+12]=b[1]+g[1],a.vertices[j+13]=0,a.vertices[j+14]=e[0],a.vertices[j+15]=e[1],a.vertices[j+16]=e[2],a.vertices[j+17]=e[3],a.vertices[j+18]=1,a.vertices[j+19]=0,a.vertices[j+20]=0,a.vertices[j+21]=0,a.vertices[j+22]=c[0]-h[0],a.vertices[j+23]=c[1]-h[1],a.vertices[j+24]=0,a.vertices[j+25]=e[0],a.vertices[j+26]=e[1],a.vertices[j+27]=e[2],a.vertices[j+28]=e[3],a.vertices[j+29]=1,a.vertices[j+30]=1,a.vertices[j+31]=0,a.vertices[j+32]=0,a.vertices[j+33]=c[0]+h[0],a.vertices[j+34]=c[1]+h[1],a.vertices[j+35]=0,a.vertices[j+36]=e[0],a.vertices[j+37]=e[1],a.vertices[j+38]=e[2],a.vertices[j+39]=e[3],a.vertices[j+40]=0,a.vertices[j+41]=1,a.vertices[j+42]=0,a.vertices[j+43]=0,a.indices[this.indexCount]=this.vertexCount,a.indices[this.indexCount+1]=this.vertexCount+1,a.indices[this.indexCount+2]=this.vertexCount+2,a.indices[this.indexCount+3]=this.vertexCount+2,a.indices[this.indexCount+4]=this.vertexCount+3,a.indices[this.indexCount+5]=this.vertexCount,this.vertexCount+=4,this.indexCount+=6}drawColoredText(b,c,d=12,e="start-start",f){let g=this.textureCache[a.font.name];void 0===g&&(16<=this.textureIndex+1&&this.flush(),this.textureCache[a.font.name]=g=this.textureIndex,a.font.bind(this.textureIndex++));const h=[],i={};d/=a.fontData.info.size;let j=0;const k=a.fontData.info.size*d;let l;for(const g of b)for(const b of Object.values(a.fontData.chars))if(b.char===g){if(void 0!==l)for(const c of Object.values(a.fontData.kernings))if(c[0]===l&&c[1]===b.id){j+=c.amt*d,i[b.id]=c;break}l=b.id,h.push(b),j+=b.xadv*d;break}let m=0,n=0;switch(e=e.split("-"),e[0]){case"start":break;case"center":m=-j/2;break;case"end":m=-j;}switch(e[1]){case"start":break;case"center":n=-k/2;break;case"end":n=-k;}h.forEach(b=>{(this.vertexCount+4>=w||this.indexCount+6>=x)&&this.flush(),void 0!==i[b.id]&&(c[0]+=i[b.id].amt*d);const e=this.vertexCount*a.vertexStride;a.vertices[e]=c[0]+b.xoff*d+m,a.vertices[e+1]=c[1]+b.yoff*d+n,a.vertices[e+2]=0,a.vertices[e+3]=f[0],a.vertices[e+4]=f[1],a.vertices[e+5]=f[2],a.vertices[e+6]=f[3],a.vertices[e+7]=b.x/a.fontData.common.scaleW,a.vertices[e+8]=b.y/a.fontData.common.scaleH,a.vertices[e+9]=g,a.vertices[e+10]=d,a.vertices[e+11]=c[0]+(b.w+b.xoff)*d+m,a.vertices[e+12]=c[1]+b.yoff*d+n,a.vertices[e+13]=0,a.vertices[e+14]=f[0],a.vertices[e+15]=f[1],a.vertices[e+16]=f[2],a.vertices[e+17]=f[3],a.vertices[e+18]=(b.x+b.w)/a.fontData.common.scaleW,a.vertices[e+19]=b.y/a.fontData.common.scaleH,a.vertices[e+20]=g,a.vertices[e+21]=d,a.vertices[e+22]=c[0]+(b.w+b.xoff)*d+m,a.vertices[e+23]=c[1]+(b.h+b.yoff)*d+n,a.vertices[e+24]=0,a.vertices[e+25]=f[0],a.vertices[e+26]=f[1],a.vertices[e+27]=f[2],a.vertices[e+28]=f[3],a.vertices[e+29]=(b.x+b.w)/a.fontData.common.scaleW,a.vertices[e+30]=(b.y+b.h)/a.fontData.common.scaleH,a.vertices[e+31]=g,a.vertices[e+32]=d,a.vertices[e+33]=c[0]+b.xoff*d+m,a.vertices[e+34]=c[1]+(b.h+b.yoff)*d+n,a.vertices[e+35]=0,a.vertices[e+36]=f[0],a.vertices[e+37]=f[1],a.vertices[e+38]=f[2],a.vertices[e+39]=f[3],a.vertices[e+40]=b.x/a.fontData.common.scaleW,a.vertices[e+41]=(b.y+b.h)/a.fontData.common.scaleH,a.vertices[e+42]=g,a.vertices[e+43]=d,a.indices[this.indexCount]=this.vertexCount,a.indices[this.indexCount+1]=this.vertexCount+1,a.indices[this.indexCount+2]=this.vertexCount+2,a.indices[this.indexCount+3]=this.vertexCount+2,a.indices[this.indexCount+4]=this.vertexCount+3,a.indices[this.indexCount+5]=this.vertexCount,this.vertexCount+=4,this.indexCount+=6,c[0]+=b.xadv*d})}flush(){a.vertexBuffer.partialWrite(a.vertices,this.vertexCount*a.vertexStride),a.indexBuffer.partialWrite(a.indices,this.indexCount),a.renderer.draw(this.indexCount),this.reset()}}a.renderer=void 0;class z{constructor(){a.gl.blendFunc(a.gl.SRC_ALPHA,a.gl.ONE_MINUS_SRC_ALPHA),a.gl.enable(a.gl.BLEND),a.gl.cullFace(a.gl.FRONT),a.gl.enable(a.gl.CULL_FACE),k.init(),a.shader.bind(),y.init(),t.init(),q.init()}static init(){a.renderer=new z}clear(b){a.gl.clearColor(b[0],b[1],b[2],b[3]),a.gl.clear(a.gl.COLOR_BUFFER_BIT)}draw(b){a.shader.bind(),a.vertexArray.bind(),a.gl.drawElements(a.gl.TRIANGLES,b,a.gl.UNSIGNED_INT,0)}delete(){Object.values(u).forEach(a=>{a.delete()}),a.shader.delete(),a.vertexArray.delete(),a.vertexBuffer.delete(),a.indexBuffer.delete()}}a.noUpdate=!1,a.deltaTime=0,a.accumulator=0;a.frames=0,a.prevTime=0;const A=[0,0];a.mouseIsPressed=!1;const B={};return a.canvas=void 0,a.gl=void 0,window.addEventListener("load",d),a.Batch=y,a.Camera=q,a.IndexBuffer=s,a.Mat4=p,a.Math=l,a.Noise=class{constructor(a=1,b=.05){this.vertices=256,this.amp=a,this.scl=b,this.r=[];for(let c=0;c<this.vertices;c++)this.r.push(Math.random())}value(a){const b=a*this.scl,c=h(b),d=b-c,e=c&this.vertices-1,f=e+1&this.vertices-1;return l.lerp(this.r[e],this.r[f],d*d*(3-2*d))*this.amp}},a.Renderer=z,a.Shader=k,a.Texture=v,a.Vec2=m,a.Vec3=n,a.Vec4=o,a.VertexArray=t,a.VertexBuffer=r,a.bytes=b,a.fixedUpdateFrequency=50,a.init=function(b,c,d){if(void 0===d&&(d={}),!0===d.noUpdate&&(a.noUpdate=!0),void 0===d.canvas?(a.canvas=document.createElement("CANVAS"),a.gl=a.canvas.getContext("webgl2"),void 0===d.parent?document.body.appendChild(a.canvas):d.parent.appendChild(a.canvas)):(a.canvas=d.canvas,a.gl=a.canvas.getContext("webgl2")),null===a.gl){a.canvas.parentNode.removeChild(a.canvas);const b=document.createElement("p");b.innerText="WebGL2 is not supported on your browser or machine.",void 0===d.parent?document.body.appendChild(b):d.parent.appendChild(b)}else a.canvas.width=b||100,a.canvas.height=c||100,a.canvas.size=m.new(a.canvas.width,a.canvas.height),a.canvas.center=m.new(a.canvas.width/2,a.canvas.height/2),a.canvas.id=void 0===d.id?"HummingbirdCanvas":d.id,z.init();window.addEventListener("keydown",a=>{B[a.keyCode]=!0,"function"==typeof keyPressed&&keyPressed(a)}),window.addEventListener("keyup",a=>{B[a.keyCode]=!1,"function"==typeof keyReleased&&keyReleased(a)}),window.addEventListener("mousemove",b=>{const c=a.canvas.getBoundingClientRect();m.set(A,b.clientX-c.left-document.body.scrollLeft,b.clientY-c.top-document.body.scrollTop),"function"==typeof mouseMoved&&mouseMoved(b)}),window.addEventListener("mousedown",b=>{a.mouseIsPressed=!0,"function"==typeof mousePressed&&mousePressed(b)}),window.addEventListener("mouseup",b=>{a.mouseIsPressed=!1,"function"==typeof mouseReleased&&mouseReleased(b)}),"function"==typeof windowResized&&window.addEventListener("resize",a=>{windowResized(a)})},a.keysPressed=B,a.loadFile=c,a.maxIndexCount=x,a.maxVertexCount=2000,a.mousePos=A,a.resizeCanvas=function(b,c){a.canvas.width=b||100,a.canvas.height=c||100,m.set(a.canvas.size,a.canvas.width,a.canvas.height),m.set(a.canvas.center,a.canvas.width/2,a.canvas.height/2),a.gl.viewport(0,0,a.canvas.width,a.canvas.height),p.orthographic(a.camera.projectionMatrix,0,a.canvas.width,0,a.canvas.height)},a.setup=d,a.textures=u,a.update=e,a.version="v0.4.0",a}({});