var HB=function(t){"use strict";function e(){i.init(),r.init(),s.init()}class a{static radians(t){return t*(Math.PI/180)}static degrees(t){return t*(180/Math.PI)}static dist(t,e,a,i){return Math.sqrt((a-t)*(a-t)+(i-e)*(i-e))}static map(t,e,a,i,r){return i+(r-i)*(t-e)/(a-e)}static random(t,e){return void 0!==e?Math.random()*(e-t)+t:void 0!==t?Math.random()*t:Math.random()}static randomInt(t,e){return Math.floor(this.random(t,e))}static lerp(t,e,a){return t+a*(e-t)}static constrain(t,e,a){return t>a?a:t<e?e:t}static wrap(t,e,a){return t>a?e:t<e?a:t}static rectRectCollision(t,e,a,i){return 2*Math.abs(t.x+e.x/2-(a.x+i.x/2))<e.x+i.x&&2*Math.abs(t.y+e.y/2-(a.y+i.y/2))<e.y+i.y}static rectCircleCollision(t,e,a,i){const r=a.x-Math.max(t.x,Math.min(a.x,t.x+e.x)),s=a.y-Math.max(t.y,Math.min(a.y,t.y+e.y));return r*r+s*s<i*i}}class i{static init(){i.zero={x:0,y:0},i.one={x:1,y:1}}static new(t=0,e=0){return{x:t,y:e}}static fromVec2(t){return{x:t.x,y:t.y}}static fromAngle(t,e=1){return{x:Math.cos(t)*e,y:Math.sin(t)*e}}static copy(t,e){t.x=e.x,t.y=e.y}static set(t,e,a){t.x=e,t.y=a}static add(t,e,a){t.x+=e,t.y+=a}static addVec2(t,e){t.x+=e.x,t.y+=e.y}static addScalar(t,e){t.x+=e,t.y+=e}static subtract(t,e,a){t.x-=e,t.y-=a}static subtractVec2(t,e){t.x-=e.x,t.y-=e.y}static subtractScalar(t,e){t.x-=e,t.y-=e}static multiply(t,e,a){t.x*=e,t.y*=a}static multiplyVec2(t,e){t.x*=e.x,t.y*=e.y}static multiplyScalar(t,e){t.x*=e,t.y*=e}static divide(t,e,a){t.x/=e,t.y/=a}static divideVec2(t,e){t.x/=e.x,t.y/=e.y}static divideScalar(t,e){t.x/=e,t.y/=e}static constrain(t,e,i,r,s){t.x=a.constrain(t.x,e,i),t.y=a.constrain(t.y,r,s)}static angleBetweenVec2(t,e){return Math.atan2(e.y-t.y,e.x-t.x)}static distBetweenVec2(t,e){return Math.sqrt((e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y))}static collidesRect(t,e,a){return t.x<e.x+a.x&&t.x>e.x&&t.y<e.y+a.y&&t.y>e.y}}class r{static init(){r.zero={x:0,y:0,z:0},r.one={x:1,y:1,z:1}}static new(t=0,e=0,a=0){return{x:t,y:e,z:a}}}class s{static init(){s.zero={x:0,y:0,z:0,w:0},s.one={x:1,y:1,z:1,w:1},s.colors={},s.colors.white={x:1,y:1,z:1,w:1},s.colors.black={x:0,y:0,z:0,w:1},s.colors.red={x:1,y:0,z:0,w:1},s.colors.green={x:0,y:1,z:0,w:1},s.colors.blue={x:0,y:0,z:1,w:1},s.colors.yellow={x:1,y:1,z:0,w:1},s.colors.cyan={x:0,y:1,z:1,w:1},s.colors.magenta={x:1,y:0,z:1,w:1}}static new(t=0,e=0,a=0,i=0){return{x:t,y:e,z:a,w:i}}static set(t,e,a,i,r){t.x=e,t.y=a,t.z=i,t.w=r}static multMat4(t,e,a){return t.x=e.x*a.aa+e.y*a.ba+e.z*a.ca+e.w*a.da,t.y=e.x*a.ab+e.y*a.bb+e.z*a.cb+e.w*a.db,t.z=e.x*a.ac+e.y*a.bc+e.z*a.cc+e.w*a.dc,t.w=e.x*a.ad+e.y*a.bd+e.z*a.cd+e.w*a.dd,t}}class n{static new(t=0){return{aa:t,ab:0,ac:0,ad:0,ba:0,bb:t,bc:0,bd:0,ca:0,cb:0,cc:t,cd:0,da:0,db:0,dc:0,dd:t}}static copy(t,e){return t.aa=e.aa,t.ab=e.ab,t.ac=e.ac,t.ad=e.ad,t.ba=e.ba,t.bb=e.bb,t.bc=e.bc,t.bd=e.bd,t.ca=e.ca,t.cb=e.cb,t.cc=e.cc,t.cd=e.cd,t.da=e.da,t.db=e.db,t.dc=e.dc,t.dd=e.dd,t}static fromMat4(t){return{aa:t.aa,ab:t.ab,ac:t.ac,ad:t.ad,ba:t.ba,bb:t.bb,bc:t.bc,bd:t.bd,ca:t.ca,cb:t.cb,cc:t.cc,cd:t.cd,da:t.da,db:t.db,dc:t.dc,dd:t.dd}}static transpose(t,e){const a=this.fromMat4(e);return t.aa=a.aa,t.ab=a.ba,t.ac=a.ca,t.ad=a.da,t.ba=a.ab,t.bb=a.bb,t.bc=a.cb,t.bd=a.db,t.ca=a.ac,t.cb=a.bc,t.cc=a.cc,t.cd=a.dc,t.da=a.ad,t.db=a.bd,t.dc=a.cd,t.dd=a.dd,t}static toArray(t){return[t.aa,t.ab,t.ac,t.ad,t.ba,t.bb,t.bc,t.bd,t.ca,t.cb,t.cc,t.cd,t.da,t.db,t.dc,t.dd]}static orthographic(t,e,a,i,r,s=-1,n=1){const c=a-e,d=i-r,o=n-s;return t.aa=2/c,t.ab=0,t.ac=0,t.ad=-(a+e)/c,t.ba=0,t.bb=2/d,t.bc=0,t.bd=-(i+r)/d,t.ca=0,t.cb=0,t.cc=-2/o,t.cd=-(n+s)/o,t.da=0,t.db=0,t.dc=0,t.dd=1,t}static multMat4(t,e,a){return t.aa=a.aa*e.aa+a.ab*e.ba+a.ac*e.ca+a.ad*e.da,t.ab=a.aa*e.ab+a.ab*e.bb+a.ac*e.cb+a.ad*e.db,t.ac=a.aa*e.ac+a.ab*e.bc+a.ac*e.cc+a.ad*e.dc,t.ad=a.aa*e.ad+a.ab*e.bd+a.ac*e.cd+a.ad*e.dd,t.ba=a.ba*e.aa+a.bb*e.ba+a.bc*e.ca+a.bd*e.da,t.bb=a.ba*e.ab+a.bb*e.bb+a.bc*e.cb+a.bd*e.db,t.bc=a.ba*e.ac+a.bb*e.bc+a.bc*e.cc+a.bd*e.dc,t.bd=a.ba*e.ad+a.bb*e.bd+a.bc*e.cd+a.bd*e.dd,t.ca=a.ca*e.aa+a.cb*e.ba+a.cc*e.ca+a.cd*e.da,t.cb=a.ca*e.ab+a.cb*e.bb+a.cc*e.cb+a.cd*e.db,t.cc=a.ca*e.ac+a.cb*e.bc+a.cc*e.cc+a.cd*e.dc,t.cd=a.ca*e.ad+a.cb*e.bd+a.cc*e.cd+a.cd*e.dd,t.da=a.da*e.aa+a.db*e.ba+a.dc*e.ca+a.dd*e.da,t.db=a.da*e.ab+a.db*e.bb+a.dc*e.cb+a.dd*e.db,t.dc=a.da*e.ac+a.db*e.bc+a.dc*e.cc+a.dd*e.dc,t.dd=a.da*e.ad+a.db*e.bd+a.dc*e.cd+a.dd*e.dd,t}static scale(t,e,a){return this.multMat4(t,e,{aa:a,ab:0,ac:0,ad:0,ba:0,bb:a,bc:0,bd:0,ca:0,cb:0,cc:a,cd:0,da:0,db:0,dc:0,dd:1})}static translate(t,e,a){return this.multMat4(t,e,{aa:1,ab:0,ac:0,ad:a.x,ba:0,bb:1,bc:0,bd:a.y,ca:0,cb:0,cc:1,cd:a.z,da:0,db:0,dc:0,dd:1})}static rotate(t,e,a,i){const r=Math.sin(i/2),s=a.x*r,n=a.y*r,c=a.z*r,d=Math.cos(i/2),o=s+s,l=n+n,h=c+c,u=s*o,x=n*o,b=n*l,v=c*o,g=c*l,y=c*h,m=d*o,f=d*l,p=d*h;return this.multMat4(t,e,{aa:1-b-y,ab:x+p,ac:v-f,ad:0,ba:x-p,bb:1-u-y,bc:g+m,bd:0,ca:v+f,cb:g+m,cc:1-u-b,cd:0,da:0,db:0,dc:0,dd:1})}static rotateX(t,e,a){return this.multMat4(t,e,{aa:1,ab:0,ac:0,ad:0,ba:0,bb:Math.cos(-a),bc:Math.sin(a),bd:0,ca:0,cb:Math.sin(-a),cc:Math.cos(-a),cd:0,da:0,db:0,dc:0,dd:1})}static rotateY(t,e,a){return this.multMat4(t,e,{aa:Math.cos(-a),ab:0,ac:Math.sin(-a),ad:0,ba:0,bb:1,bc:0,bd:0,ca:Math.sin(a),cb:0,cc:Math.cos(-a),cd:0,da:0,db:0,dc:0,dd:1})}static rotateZ(t,e,a){return this.multMat4(t,e,{aa:Math.cos(-a),ab:Math.sin(a),ac:0,ad:0,ba:Math.sin(-a),bb:Math.cos(-a),bc:0,bd:0,ca:0,cb:0,cc:1,cd:0,da:0,db:0,dc:0,dd:1})}}t.shader=void 0;class c{constructor(t,e){this.vertexShaderSource=t||"\n\t\t\tattribute vec4 aVertexPosition;\n\t\t\tattribute vec4 aVertexColor;\n\t\t\tattribute vec2 aTexturePosition;\n\t\t\tattribute float aTextureId;\n\t\t\tattribute float aTextSize;\n\n\t\t\tvarying vec4 vScreenPosition;\n\t\t\tvarying vec4 vVertexColor;\n\t\t\tvarying vec2 vTexturePosition;\n\t\t\tvarying float vTextureId;\n\t\t\tvarying float vTextSize;\n\n\t\t\tuniform mat4 uMVP;\n\n\t\t\tvoid main() {\n\t\t\t\tvScreenPosition = uMVP * aVertexPosition;\n\t\t\t\tgl_Position = vScreenPosition;\n\t\t\t\tvVertexColor = aVertexColor;\n\t\t\t\tvTexturePosition = aTexturePosition;\n\t\t\t\tvTextureId = aTextureId;\n\t\t\t\tvTextSize = aTextSize;\n\t\t\t}\n\t\t",this.fragmentShaderSource=e||"\n\t\t\t#extension GL_OES_standard_derivatives : enable\n\n\t\t\tprecision mediump float;\n\t\t\tvarying vec4 vScreenPosition;\n\t\t\tvarying vec4 vVertexColor;\n\t\t\tvarying vec2 vTexturePosition;\n\t\t\tvarying float vTextureId;\n\t\t\tvarying float vTextSize;\n\n\t\t\tuniform sampler2D uTextureIds[16];\n\n\t\t\tvoid main() {\n\t\t\t\tvec4 texSample;\n\t\t\t\tint textureId = int(vTextureId);\n\t\t\t\tfor(int i = 0; i < 16; i++) {\n\t\t\t\t\tif(i == textureId) {\n\t\t\t\t\t\ttexSample = texture2D(uTextureIds[i], vTexturePosition); break;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif(vTextSize <= 0.0) {\n\t\t\t\t\t// float dist = distance(vec4(0.0, 0.0, 0.0, 1.0), vScreenPosition);\n\t\t\t\t\t// vec4 color = texSample * vVertexColor;\n\t\t\t\t\t// pixelColor = vec4(color.rgb, smoothstep(0.75, 0.5, dist)*color.a);\n\t\t\t\t\tgl_FragColor = vVertexColor * texSample;\n\t\t\t\t} else {\n\t\t\t\t\tfloat sigDist = max(min(texSample.r, texSample.g), min(max(texSample.r, texSample.g), texSample.b)) - 0.5;\n\t\t\t\t\tfloat alpha = clamp(sigDist/fwidth(sigDist) + 0.4, 0.0, 1.0);\n\t\t\t\t\tgl_FragColor = vec4(vVertexColor.rgb, alpha * vVertexColor.a);\n\t\t\t\t}\n\t\t\t}\n\t\t",this.id=this.createProgram(this.vertexShaderSource,this.fragmentShaderSource),this.attribLocationCache={},this.uniformLocationCache={}}static init(){t.gl.getExtension("OES_standard_derivatives"),t.shader=new c}createProgram(e,a){const i=t.gl.createProgram(),r=this.compileShader(t.gl.VERTEX_SHADER,e),s=this.compileShader(t.gl.FRAGMENT_SHADER,a);return t.gl.attachShader(i,r),t.gl.attachShader(i,s),t.gl.linkProgram(i),t.gl.validateProgram(i),t.gl.deleteShader(r),t.gl.deleteShader(s),i}compileShader(e,a){const i=t.gl.createShader(e);return t.gl.shaderSource(i,a),t.gl.compileShader(i),!1===t.gl.getShaderParameter(i,t.gl.COMPILE_STATUS)?(console.error(t.gl.getShaderInfoLog(i)),t.gl.deleteShader(i),null):i}getAttribLocation(e){return void 0===this.attribLocationCache[e]&&(this.attribLocationCache[e]=t.gl.getAttribLocation(this.id,e)),this.attribLocationCache[e]}getUniformLocation(e){return void 0===this.uniformLocationCache[e]&&(this.uniformLocationCache[e]=t.gl.getUniformLocation(this.id,e)),this.uniformLocationCache[e]}setUniform(e,a,i){t.gl["uniform"+i.length+e](this.getUniformLocation(a),i[0],i[1],i[2],i[3])}setUniformArray(e,a,i,r=1){t.gl["uniform"+r+e+"v"](this.getUniformLocation(a),i)}setUniformMatrix(e,a,i){const r=n.toArray(i);t.gl["uniformMatrix"+Math.sqrt(r.length)+e+"v"](this.getUniformLocation(a),!1,r)}bind(){t.gl.useProgram(this.id)}unbind(){t.gl.useProgram(null)}delete(){this.unbind(),t.gl.deleteProgram(this.id)}}t.camera=void 0;class d{constructor(){t.gl.viewport(0,0,t.canvas.width,t.canvas.height),this.MVP=n.new(),this.projectionMatrix=n.new(),n.orthographic(this.projectionMatrix,0,t.canvas.width,0,t.canvas.height,-1,1),this.viewMatrix=n.new(1)}static init(){t.camera=new d}setMVP(e){void 0===e?(n.multMat4(this.MVP,this.viewMatrix,this.projectionMatrix),n.transpose(this.MVP,this.MVP),t.shader.setUniformMatrix("f","uMVP",this.MVP)):(n.transpose(e,e),t.shader.setUniformMatrix("f","uMVP",e))}translate(t){n.translate(this.viewMatrix,this.viewMatrix,t)}zoom(e){n.translate(this.viewMatrix,this.viewMatrix,r.new(-t.canvas.center.x,-t.canvas.center.y)),n.scale(this.viewMatrix,this.viewMatrix,1+e),n.translate(this.viewMatrix,this.viewMatrix,r.new(t.canvas.center.x,t.canvas.center.y))}rotate(e){n.translate(this.viewMatrix,this.viewMatrix,r.new(-t.canvas.center.x,-t.canvas.center.y)),n.rotateZ(this.viewMatrix,this.viewMatrix,e),n.translate(this.viewMatrix,this.viewMatrix,r.new(t.canvas.center.x,t.canvas.center.y))}}function o(e){switch(e){case t.gl.FLOAT:case t.gl.UNSIGNED_INT:return 4;case t.gl.BYTE:return 1}}function l(t,e="text",a){let i={data:"",path:t};return fetch(t,{method:"GET"}).then(t=>t[e]()).then(t=>{a(t)}).catch(),i}t.vertexArray=void 0,t.vertexStride=void 0,t.vertexBuffer=void 0,t.vertices=void 0,t.indexBuffer=void 0,t.indices=void 0;class h{constructor(e){this.type=t.gl.ARRAY_BUFFER,this.id=t.gl.createBuffer(),this.bind(),t.gl.bufferData(this.type,e,t.gl.DYNAMIC_DRAW)}static init(){t.vertices=new Float32Array(g*t.vertexStride),t.vertexBuffer=new h(t.vertices)}write(e){t.gl.bufferSubData(this.type,0,e)}partialWrite(e,a){t.gl.bufferSubData(this.type,0,e,0,a)}bind(){t.gl.bindBuffer(this.type,this.id)}unbind(){t.gl.bindBuffer(this.type,null)}delete(){this.unbind(),t.gl.deleteBuffer(this.id)}}class u{constructor(e){this.type=t.gl.ELEMENT_ARRAY_BUFFER,this.id=t.gl.createBuffer(),this.bind(),t.gl.bufferData(this.type,e,t.gl.DYNAMIC_DRAW)}static init(){t.indices=new Uint16Array(y),t.indexBuffer=new u(t.indices)}write(e){t.gl.bufferSubData(this.type,0,e)}partialWrite(e,a){t.gl.bufferSubData(this.type,0,e,0,a)}bind(){t.gl.bindBuffer(this.type,this.id)}unbind(){t.gl.bindBuffer(this.type,null)}delete(){this.unbind(),t.gl.deleteBuffer(this.id)}}class x{constructor(){this.ext=t.gl.getExtension("OES_vertex_array_object"),this.id=this.ext.createVertexArrayOES(),this.bind();this.layout=new class{constructor(){this.elements=[],this.stride=0,t.vertexStride=0}add(e,a,i,r=!1){t.vertexStride+=i;const s=t.shader.getAttribLocation(e);return-1!==s&&this.elements.push({index:s,type:a,count:i,normalized:r}),this.stride+=i*o(a),s}clear(){this.elements=[],this.stride=0}}}static init(){t.vertexArray=new x,t.vertexArray.layout.add("aVertexPosition",t.gl.FLOAT,2),t.vertexArray.layout.add("aVertexColor",t.gl.FLOAT,4),t.vertexArray.layout.add("aTexturePosition",t.gl.FLOAT,2),t.vertexArray.layout.add("aTextureId",t.gl.FLOAT,1),t.vertexArray.layout.add("aTextSize",t.gl.FLOAT,1),h.init(),t.vertexArray.addBuffer(t.vertexBuffer),u.init()}addBuffer(e){this.bind(),e.bind();let a=0;this.layout.elements.forEach(e=>{t.gl.enableVertexAttribArray(e.index),t.gl.vertexAttribPointer(e.index,e.count,e.type,e.normalized,this.layout.stride,a),a+=e.count*o(e.type)})}bind(){this.ext.bindVertexArrayOES(this.id)}unbind(){this.ext.bindVertexArrayOES(null)}delete(){this.unbind(),t.vertexArray.layout.elements.forEach(e=>t.gl.disableVertexAttribArray(e.index)),t.gl.deleteVertexArray(this.id)}}const b={};t.fontData=void 0,t.font=void 0;class v{constructor(e,a,i=b,r=function(){console.log("Texture loaded: "+this.name)}){this.id=t.gl.createTexture(),this.createTexture(a),this.name=e,void 0===i?b[this.name]=this:Array.isArray(i)?i.push(this):i instanceof Object&&(i[this.name]=this),this.onLoadCallback=r}static init(e){l("https://projects.santaclausnl.ga/Hummingbird/assets/arial.json","json",a=>{t.fontData=a,e.remove(),!1===t.noUpdate&&requestAnimationFrame(C)}),t.font=new v("Hummingbird_Font-Atlas","https://projects.santaclausnl.ga/Hummingbird/assets/arial.png");const i=new Uint8Array(4e6);for(let t=0;t<1e3;t++)for(let e=0;e<1e3;e++){const r=4*(1e3*t+e);a.dist(t,e,500,500)<500?(i[r]=255,i[r+1]=255,i[r+2]=255,i[r+3]=255):(i[r]=0,i[r+1]=0,i[r+2]=0,i[r+3]=0)}new v("Hummingbird_Circle"),b.Hummingbird_Circle.bind(),this.setTextureParameters(t.gl.LINEAR,t.gl.CLAMP_TO_EDGE),t.gl.texImage2D(t.gl.TEXTURE_2D,0,t.gl.RGBA,1e3,1e3,0,t.gl.RGBA,t.gl.UNSIGNED_BYTE,i),b.Hummingbird_Circle.onLoadCallback();const r=[];for(let t=0;t<16;t++)r[t]=t;t.shader.setUniformArray("i","uTextureIds",r);{const e=t.gl.createTexture();t.gl.activeTexture(t.gl.TEXTURE0),t.gl.bindTexture(t.gl.TEXTURE_2D,e),this.setTextureParameters(t.gl.NEAREST,t.gl.REPEAT),t.gl.texImage2D(t.gl.TEXTURE_2D,0,t.gl.RGBA,1,1,0,t.gl.RGBA,t.gl.UNSIGNED_BYTE,new Uint8Array([255,255,255,255]))}}setErrorTexture(){const e=new Uint8Array([255,255,255,255,191,191,191,255,191,191,191,255,255,255,255,255]);v.setTextureParameters(t.gl.NEAREST,t.gl.REPEAT),t.gl.texImage2D(t.gl.TEXTURE_2D,0,t.gl.RGBA,2,2,0,t.gl.RGBA,t.gl.UNSIGNED_BYTE,e)}createTexture(e){if(this.bind(),this.setErrorTexture(),void 0===e)return;const a=new Image;a.onload=()=>{this.bind(),v.setTextureParameters(t.gl.LINEAR,t.gl.CLAMP_TO_EDGE),t.gl.texImage2D(t.gl.TEXTURE_2D,0,t.gl.RGBA,t.gl.RGBA,t.gl.UNSIGNED_BYTE,a),this.onLoadCallback()},a.src=e}static setTextureParameters(e,a){t.gl.texParameteri(t.gl.TEXTURE_2D,t.gl.TEXTURE_MIN_FILTER,e),t.gl.texParameteri(t.gl.TEXTURE_2D,t.gl.TEXTURE_MAG_FILTER,e),t.gl.texParameteri(t.gl.TEXTURE_2D,t.gl.TEXTURE_WRAP_S,a),t.gl.texParameteri(t.gl.TEXTURE_2D,t.gl.TEXTURE_WRAP_T,a)}bind(e=1){t.gl.activeTexture(t.gl["TEXTURE"+e]),t.gl.bindTexture(t.gl.TEXTURE_2D,this.id)}unbind(){t.gl.bindTexture(t.gl.TEXTURE_2D,null)}delete(){this.unbind(),t.gl.deleteTexture(this.id)}}t.batch=void 0;const g=4e3,y=6e3;class m{constructor(){this.vertexCount=0,this.indexCount=0,this.textureIndex=1,this.textureCache={}}static init(){t.batch=new m}begin(){this.reset()}end(){this.flush()}reset(){this.vertexCount=0,this.indexCount=0,this.textureIndex=1,this.textureCache={}}drawColoredPoint(t,e=1,a){this.pushQuad(t.x-e/4,t.y-e/4,e/2,e/2,0,a)}drawColoredPolygon(e,a,i=0){for(let r=0;r<e.length-1;r++){if(r===i)continue;(this.vertexCount+3>=g||this.indexCount+3>=y)&&this.flush();const s=this.vertexCount*t.vertexStride;t.vertices[s]=e[i].x,t.vertices[s+1]=e[i].y,t.vertices[s+2]=a.x,t.vertices[s+3]=a.y,t.vertices[s+4]=a.z,t.vertices[s+5]=a.w,t.vertices[s+6]=0,t.vertices[s+7]=1,t.vertices[s+8]=0,t.vertices[s+9]=0,t.vertices[s+10]=e[r].x,t.vertices[s+11]=e[r].y,t.vertices[s+12]=a.x,t.vertices[s+13]=a.y,t.vertices[s+14]=a.z,t.vertices[s+15]=a.w,t.vertices[s+16]=.5,t.vertices[s+17]=.5,t.vertices[s+18]=0,t.vertices[s+19]=0,t.vertices[s+20]=e[r+1].x,t.vertices[s+21]=e[r+1].y,t.vertices[s+22]=a.x,t.vertices[s+23]=a.y,t.vertices[s+24]=a.z,t.vertices[s+25]=a.w,t.vertices[s+26]=1,t.vertices[s+27]=1,t.vertices[s+28]=0,t.vertices[s+29]=0,t.indices[this.indexCount]=this.vertexCount,t.indices[this.indexCount+1]=this.vertexCount+1,t.indices[this.indexCount+2]=this.vertexCount+2,this.vertexCount+=3,this.indexCount+=3}}drawColoredRectangle(t,e,a){this.pushQuad(t.x,t.y,e.x,e.y,0,a)}drawTexturedRectangle(t,e,a){this.pushQuad(t.x,t.y,e.x,e.y,this.getTextureIndex(a))}drawColoredRectangleWithRotation(t,e,a,i){this.drawRectangleWithRotation(t,e,a,0,i)}drawTexturedRectangleWithRotation(t,e,a,i){this.drawRectangleWithRotation(t,e,a,this.getTextureIndex(i))}drawRectangleWithRotation(t,e,a,i=0,r=HB.Vec4.one){a=HB.Math.radians(a);const s=-.5*e.x*Math.cos(a),n=-.5*e.y*Math.cos(a),c=.5*e.x*Math.cos(a),d=.5*e.y*Math.cos(a),o=-.5*e.x*Math.sin(a),l=-.5*e.y*Math.sin(a),h=.5*e.x*Math.sin(a),u=.5*e.y*Math.sin(a);this.pushArbitraryQuad(s-l+t.x+e.x/2,o+n+t.y+e.y/2,c-l+t.x+e.x/2,h+n+t.y+e.y/2,c-u+t.x+e.x/2,h+d+t.y+e.y/2,s-u+t.x+e.x/2,o+d+t.y+e.y/2,i,r)}drawColoredLine(t,e,a,r){(this.vertexCount+4>=g||this.indexCount+6>=y)&&this.flush();const s=i.angleBetweenVec2(t,e),n=i.fromAngle(s-Math.PI/2,a/2),c=i.fromAngle(s+Math.PI/2,a/2);this.pushArbitraryQuad(t.x-n.x,t.y-n.y,t.x+n.x,t.y+n.y,e.x-c.x,e.y-c.y,e.x+c.x,e.y+c.y,0,r)}drawColoredEllipse(t,e,a){this.pushQuad(t.x,t.y,e.x,e.y,this.getTextureIndex(b.Hummingbird_Circle),a)}drawColoredText(e,a,i=12,r="start-start",s){const n=[],c={},d=i/t.fontData.info.size;let o=0;const l=t.fontData.common.lineh*d;let h;for(let a=0;a<e.length;a++){const i=t.fontData.chars[e[a]]||t.fontData.chars["?"];if(o+=i.xadv*d,n.push(i),void 0!==h){const t=h[i.id];void 0!==t&&(o+=t*d,c[i.id]=t)}h=i.kerns}let u=0,x=0;const b=r.split("-");switch(b[0]){case"start":break;case"center":u=-o/2;break;case"end":u=-o}switch(b[1]){case"start":break;case"center":x=-l/2;break;case"end":x=-l}let v=this.getTextureIndex(t.font);for(let e of n){const i=c[e.id];void 0!==i&&(u+=i*d),this.pushQuad(a.x+e.xoff*d+u,a.y+e.yoff*d+x,e.w*d,e.h*d,v,s,d,e.x/t.fontData.common.scaleW,e.y/t.fontData.common.scaleH,e.w/t.fontData.common.scaleW,e.h/t.fontData.common.scaleH),u+=e.xadv*d}return o}pushQuad(t,e,a,i,r,s,n,c,d,o,l){this.pushArbitraryQuad(t,e,t+a,e,t+a,e+i,t,e+i,r,s,n,c,d,o,l)}pushArbitraryQuad(e,a,i,r,s,n,c,d,o=0,l=HB.Vec4.one,h=0,u=0,x=0,b=1,v=1){(this.vertexCount+4>=g||this.indexCount+6>=y)&&this.flush();const m=this.vertexCount*t.vertexStride;t.vertices[m]=e,t.vertices[m+1]=a,t.vertices[m+2]=l.x,t.vertices[m+3]=l.y,t.vertices[m+4]=l.z,t.vertices[m+5]=l.w,t.vertices[m+6]=u,t.vertices[m+7]=x,t.vertices[m+8]=o,t.vertices[m+9]=h,t.vertices[m+10]=i,t.vertices[m+11]=r,t.vertices[m+12]=l.x,t.vertices[m+13]=l.y,t.vertices[m+14]=l.z,t.vertices[m+15]=l.w,t.vertices[m+16]=u+b,t.vertices[m+17]=x,t.vertices[m+18]=o,t.vertices[m+19]=h,t.vertices[m+20]=s,t.vertices[m+21]=n,t.vertices[m+22]=l.x,t.vertices[m+23]=l.y,t.vertices[m+24]=l.z,t.vertices[m+25]=l.w,t.vertices[m+26]=u+b,t.vertices[m+27]=x+v,t.vertices[m+28]=o,t.vertices[m+29]=h,t.vertices[m+30]=c,t.vertices[m+31]=d,t.vertices[m+32]=l.x,t.vertices[m+33]=l.y,t.vertices[m+34]=l.z,t.vertices[m+35]=l.w,t.vertices[m+36]=u,t.vertices[m+37]=x+v,t.vertices[m+38]=o,t.vertices[m+39]=h,t.indices[this.indexCount]=this.vertexCount,t.indices[this.indexCount+1]=this.vertexCount+1,t.indices[this.indexCount+2]=this.vertexCount+2,t.indices[this.indexCount+3]=this.vertexCount+2,t.indices[this.indexCount+4]=this.vertexCount+3,t.indices[this.indexCount+5]=this.vertexCount,this.vertexCount+=4,this.indexCount+=6}getTextureIndex(t){let e=this.textureCache[t.name];return void 0===e&&(this.textureIndex+1>=16&&this.flush(),this.textureCache[t.name]=e=this.textureIndex,t.bind(this.textureIndex++)),e}flush(){t.vertexBuffer.partialWrite(t.vertices,this.vertexCount*t.vertexStride),t.indexBuffer.partialWrite(t.indices,this.indexCount),t.renderer.draw(this.indexCount),this.reset()}}t.renderer=void 0;class f{constructor(){t.gl.blendFunc(t.gl.SRC_ALPHA,t.gl.ONE_MINUS_SRC_ALPHA),t.gl.enable(t.gl.BLEND),t.gl.cullFace(t.gl.FRONT),t.gl.enable(t.gl.CULL_FACE),c.init(),t.shader.bind(),m.init(),x.init(),d.init()}static init(){t.renderer=new f}clear(e){void 0!==e&&t.gl.clearColor(e.x,e.y,e.z,e.w),t.gl.clear(t.gl.COLOR_BUFFER_BIT)}draw(e){t.shader.bind(),t.vertexArray.bind(),t.gl.drawElements(t.gl.TRIANGLES,e,t.gl.UNSIGNED_SHORT,0)}delete(){Object.values(b).forEach(t=>{t.delete()}),t.shader.delete(),t.vertexArray.delete(),t.vertexBuffer.delete(),t.indexBuffer.delete()}}t.noUpdate=!1,t.deltaTime=0,t.accumulator=0;t.frames=0,t.prevTime=0;const p={x:0,y:0};t.mouseIsPressed=!1;const w={};function T(){console.log("Hummingbird v0.5.17 by SantaClausNL. https://www.santaclausnl.ga/");const t=document.createElement("p");t.innerText="LOADING...",t.style="margin: 0; position: absolute; top: 50%; left: 50%; font-size: 7em; transform: translate(-50%, -50%); font-family: Arial, Helvetica, sans-serif;",document.body.appendChild(t),e(),"function"==typeof setup&&setup(),v.init(t)}function C(e){if(t.deltaTime=e-t.prevTime,t.prevTime=e,t.camera.setMVP(),t.batch.begin(),"function"==typeof fixedUpdate)for(t.accumulator+=t.deltaTime;t.accumulator>=20;){if(t.deltaTime>1e3){t.accumulator=0,t.deltaTime=1,fixedUpdate();break}fixedUpdate(),t.accumulator-=20}"function"==typeof update&&update(),t.batch.end(),t.frames++,requestAnimationFrame(C)}return t.canvas=void 0,t.gl=void 0,window.addEventListener("load",T),t.Batch=m,t.Camera=d,t.IndexBuffer=u,t.Mat4=n,t.Math=a,t.Noise=class{constructor(t=1,e=.05){this.vertices=256,this.amp=t,this.scl=e,this.r=[];for(let t=0;t<this.vertices;t++)this.r.push(Math.random())}value(t){const e=t*this.scl,i=Math.floor(e),r=e-i,s=i&this.vertices-1,n=s+1&this.vertices-1;return a.lerp(this.r[s],this.r[n],r*r*(3-2*r))*this.amp}},t.Renderer=f,t.Shader=c,t.Texture=v,t.Vec2=i,t.Vec3=r,t.Vec4=s,t.VertexArray=x,t.VertexBuffer=h,t.bytes=o,t.fixedUpdateFrequency=50,t.init=function(e=100,a=100,r){if(void 0===r&&(r={}),!0===r.noUpdate&&(t.noUpdate=!0),void 0===r.canvas?(t.canvas=document.createElement("CANVAS"),t.gl=t.canvas.getContext("webgl"),void 0===r.parent?document.body.appendChild(t.canvas):r.parent.appendChild(t.canvas)):(t.canvas=r.canvas,t.gl=t.canvas.getContext("webgl")),null===t.gl){t.canvas.parentNode.removeChild(t.canvas);const e=document.createElement("p");e.innerText="WebGL is not supported on your browser or machine.",void 0===r.parent?document.body.appendChild(e):r.parent.appendChild(e)}else t.canvas.width=e,t.canvas.height=a,t.canvas.size=i.new(t.canvas.width,t.canvas.height),t.canvas.center=i.new(t.canvas.width/2,t.canvas.height/2),t.canvas.id=void 0===r.id?"HummingbirdCanvas":r.id,t.canvas.setAttribute("alt","Hummingbird canvas element."),f.init();window.addEventListener("keydown",t=>{w[t.keyCode]=!0,"function"==typeof keyPressed&&keyPressed(t)}),window.addEventListener("keyup",t=>{w[t.keyCode]=!1,"function"==typeof keyReleased&&keyReleased(t)}),window.addEventListener("mousemove",e=>{const a=t.canvas.getBoundingClientRect();i.set(p,e.clientX-a.left-document.body.scrollLeft,e.clientY-a.top-document.body.scrollTop),"function"==typeof mouseMoved&&mouseMoved(e)}),window.addEventListener("mousedown",e=>{t.mouseIsPressed=!0,"function"==typeof mousePressed&&mousePressed(e)}),window.addEventListener("mouseup",e=>{t.mouseIsPressed=!1,"function"==typeof mouseReleased&&mouseReleased(e)}),"function"==typeof windowResized&&window.addEventListener("resize",t=>{windowResized(t)})},t.initMathObjects=e,t.keysPressed=w,t.loadFile=l,t.maxIndexCount=y,t.maxVertexCount=g,t.mousePos=p,t.resizeCanvas=function(e=100,a=100){t.canvas.width=e,t.canvas.height=a,i.set(t.canvas.size,t.canvas.width,t.canvas.height),i.set(t.canvas.center,t.canvas.width/2,t.canvas.height/2),t.gl.viewport(0,0,t.canvas.width,t.canvas.height),n.orthographic(t.camera.projectionMatrix,0,t.canvas.width,0,t.canvas.height)},t.setup=T,t.textures=b,t.update=C,t.version="v0.5.17",t}({});