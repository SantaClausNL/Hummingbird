window.HB=function(){"use strict";var a=Math.sin,b=Math.cos,c=Math.floor,d=Math.sqrt,e=Math.PI;return{version:"v0.3.23",noUpdate:!1,deltaTime:0,accumulator:0,fixedUpdateFrequency:50,frames:0,prevTime:0,mousePos:[0,0],mouseIsPressed:!1,keysPressed:{},canvas:void 0,gl:void 0,renderer:void 0,vertexArray:void 0,maxVertexCount:2e3,vertexStride:void 0,vertices:void 0,vertexBuffer:void 0,maxIndexCount:3e3,indices:void 0,indexBuffer:void 0,textures:{},batch:void 0,camera:void 0,shader:void 0,fontData:void 0,font:void 0,setup:function(){console.log("Hummingbird "+HB.version+" by SantaClausNL. https://www.santaclausnl.ga/");const a=document.createElement("p");a.innerText="LOADING...",a.style="margin: 0; position: absolute; top: 50%; left: 50%; font-size: 7em; transform: translate(-50%, -50%); font-family: Arial, Helvetica, sans-serif;",document.body.appendChild(a),new HB.Math,"function"==typeof setup&&setup(),HB.loadFile("https://projects.santaclausnl.ga/Hummingbird/assets/arial.json","json",b=>{HB.fontData=b,a.remove(),"function"==typeof update&&!0!==HB.noUpdate&&requestAnimationFrame(HB.update)});const b=new Image;b.onload=b.onerror=()=>HB.font=new HB.Texture("Hummingbird_Font-Atlas","https://projects.santaclausnl.ga/Hummingbird/assets/arial."+(2===b.height?"webp":"png"),null),b.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"},init:function(a,b,c){if(void 0===c&&(c={}),!0===c.noUpdate&&(HB.noUpdate=!0),void 0===c.canvas?(HB.canvas=document.createElement("CANVAS"),HB.gl=HB.canvas.getContext("webgl2"),void 0===c.parent?document.body.appendChild(HB.canvas):c.parent.appendChild(HB.canvas)):(HB.canvas=c.canvas,gl=HB.canvas.getContext("webgl2")),null===HB.gl){HB.canvas.parentNode.removeChild(HB.canvas);const a=document.createElement("p");a.innerText="WebGL2 is not supported on your browser or machine.",void 0===c.parent?document.body.appendChild(a):c.parent.appendChild(a)}else HB.canvas.width=a||100,HB.canvas.height=b||100,HB.canvas.size=HB.Vec2.new(HB.canvas.width,HB.canvas.height),HB.canvas.id=void 0===c.id?"HummingbirdCanvas":c.id,HB.renderer=new HB.Renderer;window.addEventListener("keydown",a=>{HB.keysPressed[a.keyCode]=!0,"function"==typeof keyPressed&&keyPressed(a)}),window.addEventListener("keyup",a=>{HB.keysPressed[a.keyCode]=!1,"function"==typeof keyReleased&&keyReleased(a)}),window.addEventListener("mousemove",a=>{const b=HB.canvas.getBoundingClientRect();HB.Vec2.set(HB.mousePos,a.clientX-b.left-document.body.scrollLeft,a.clientY-b.top-document.body.scrollTop),"function"==typeof mouseMoved&&mouseMoved(a)}),window.addEventListener("mousedown",a=>{HB.mouseIsPressed=!0,"function"==typeof mousePressed&&mousePressed(a)}),window.addEventListener("mouseup",a=>{HB.mouseIsPressed=!1,"function"==typeof mouseReleased&&mouseReleased(a)}),"function"==typeof windowResized&&window.addEventListener("resize",a=>{windowResized(a)}),window.addEventListener("beforeunload",()=>{HB.renderer.delete(),delete HB.gl,HB.canvas.remove()})},resizeCanvas:function(a,b){HB.canvas.width=a||100,HB.canvas.height=b||100,HB.Vec2.set(HB.canvas.size,HB.canvas.width,HB.canvas.height),HB.gl.viewport(0,0,HB.canvas.width,HB.canvas.height),HB.Mat4.orthographic(HB.camera.projectionMatrix,0,HB.canvas.width,0,HB.canvas.height)},update:function(a){if(HB.deltaTime=a-HB.prevTime,HB.prevTime=a,HB.camera.setMVP(),HB.batch.begin(),"function"==typeof fixedUpdate)for(HB.accumulator+=HB.deltaTime;HB.accumulator>=1e3/HB.fixedUpdateFrequency;)fixedUpdate(),HB.accumulator-=1e3/HB.fixedUpdateFrequency;update(),HB.batch.end(),HB.frames++,requestAnimationFrame(HB.update)},Renderer:class{constructor(){HB.gl.blendFunc(HB.gl.SRC_ALPHA,HB.gl.ONE_MINUS_SRC_ALPHA),HB.gl.enable(HB.gl.BLEND),HB.gl.cullFace(HB.gl.FRONT),HB.gl.enable(HB.gl.CULL_FACE),HB.shader=new HB.Shader,HB.shader.bind();const a=[];for(let b=0;16>b;b++)a[b]=b;HB.shader.setUniformArray("i","uTextureIds",a);{const a=HB.gl.createTexture();HB.gl.activeTexture(HB.gl.TEXTURE0),HB.gl.bindTexture(HB.gl.TEXTURE_2D,a),HB.gl.texParameteri(HB.gl.TEXTURE_2D,HB.gl.TEXTURE_MIN_FILTER,HB.gl.NEAREST),HB.gl.texParameteri(HB.gl.TEXTURE_2D,HB.gl.TEXTURE_MAG_FILTER,HB.gl.NEAREST),HB.gl.texParameteri(HB.gl.TEXTURE_2D,HB.gl.TEXTURE_WRAP_S,HB.gl.REPEAT),HB.gl.texParameteri(HB.gl.TEXTURE_2D,HB.gl.TEXTURE_WRAP_T,HB.gl.REPEAT),HB.gl.texImage2D(HB.gl.TEXTURE_2D,0,HB.gl.RGBA8,1,1,0,HB.gl.RGBA,HB.gl.UNSIGNED_BYTE,new Uint8Array([255,255,255,255]))}HB.batch=new HB.Batch,HB.vertexArray=new HB.VertexArray,HB.vertexArray.layout.add("aVertexPosition",HB.gl.FLOAT,3),HB.vertexArray.layout.add("aVertexColor",HB.gl.FLOAT,4),HB.vertexArray.layout.add("aTexturePosition",HB.gl.FLOAT,2),HB.vertexArray.layout.add("aTextureId",HB.gl.FLOAT,1),HB.vertexArray.layout.add("aTextSize",HB.gl.FLOAT,1),HB.vertices=new Float32Array(HB.maxVertexCount*HB.vertexStride),HB.vertexBuffer=new HB.VertexBuffer(HB.vertices),HB.vertexArray.addBuffer(HB.vertexBuffer),HB.indices=new Uint32Array(HB.maxIndexCount),HB.indexBuffer=new HB.IndexBuffer(HB.indices),HB.camera=new HB.Camera}clear(a){HB.gl.clearColor(a[0],a[1],a[2],a[3]),HB.gl.clear(HB.gl.COLOR_BUFFER_BIT)}draw(a){HB.shader.bind(),HB.vertexArray.bind(),HB.gl.drawElements(HB.gl.TRIANGLES,a,HB.gl.UNSIGNED_INT,0)}delete(){Object.values(HB.textures).forEach(a=>{a.delete()}),HB.shader.delete(),HB.vertexArray.delete(),HB.vertexBuffer.delete(),HB.indexBuffer.delete()}},Camera:class{constructor(){HB.gl.viewport(0,0,HB.canvas.width,HB.canvas.height),this.projectionMatrix=HB.Mat4.new(1),HB.Mat4.orthographic(this.projectionMatrix,0,HB.canvas.width,0,HB.canvas.height,-1,1),this.viewMatrix=HB.Mat4.new(1),this.modelMatrix=HB.Mat4.new(1)}setMVP(a=void 0){if(a===void 0){const b=HB.Mat4.new(1);HB.Mat4.multMat4(b,this.modelMatrix,this.viewMatrix),a=HB.Mat4.new(1),HB.Mat4.multMat4(a,b,this.projectionMatrix)}HB.shader.bind(),HB.shader.setUniformMatrix("f","uMVP",a)}translate(a){HB.Mat4.translate(this.viewMatrix,this.viewMatrix,a)}},Batch:class{constructor(){this.vertexCount=0,this.indexCount=0,this.textureIndex=1,this.textureCache={}}begin(){this.reset()}end(){this.flush()}reset(){this.vertexCount=0,this.indexCount=0,this.textureIndex=1,this.textureCache={}}drawColoredRect(a,b,c){(this.vertexCount+4>=HB.maxVertexCount||this.indexCount+6>=HB.maxIndexCount)&&this.flush();const d=this.vertexCount*HB.vertexStride;HB.vertices[d]=a[0],HB.vertices[d+1]=a[1],HB.vertices[d+2]=0,HB.vertices[d+3]=c[0],HB.vertices[d+4]=c[1],HB.vertices[d+5]=c[2],HB.vertices[d+6]=c[3],HB.vertices[d+7]=0,HB.vertices[d+8]=0,HB.vertices[d+9]=0,HB.vertices[d+10]=0,HB.vertices[d+11]=a[0]+b[0],HB.vertices[d+12]=a[1],HB.vertices[d+13]=0,HB.vertices[d+14]=c[0],HB.vertices[d+15]=c[1],HB.vertices[d+16]=c[2],HB.vertices[d+17]=c[3],HB.vertices[d+18]=1,HB.vertices[d+19]=0,HB.vertices[d+20]=0,HB.vertices[d+21]=0,HB.vertices[d+22]=a[0]+b[0],HB.vertices[d+23]=a[1]+b[1],HB.vertices[d+24]=0,HB.vertices[d+25]=c[0],HB.vertices[d+26]=c[1],HB.vertices[d+27]=c[2],HB.vertices[d+28]=c[3],HB.vertices[d+29]=1,HB.vertices[d+30]=1,HB.vertices[d+31]=0,HB.vertices[d+32]=0,HB.vertices[d+33]=a[0],HB.vertices[d+34]=a[1]+b[1],HB.vertices[d+35]=0,HB.vertices[d+36]=c[0],HB.vertices[d+37]=c[1],HB.vertices[d+38]=c[2],HB.vertices[d+39]=c[3],HB.vertices[d+40]=0,HB.vertices[d+41]=1,HB.vertices[d+42]=0,HB.vertices[d+43]=0,HB.indices[this.indexCount]=this.vertexCount,HB.indices[this.indexCount+1]=this.vertexCount+1,HB.indices[this.indexCount+2]=this.vertexCount+2,HB.indices[this.indexCount+3]=this.vertexCount+2,HB.indices[this.indexCount+4]=this.vertexCount+3,HB.indices[this.indexCount+5]=this.vertexCount,this.vertexCount+=4,this.indexCount+=6}drawTexturedRect(a,b,c){(this.vertexCount+4>=HB.maxVertexCount||this.indexCount+6>=HB.maxIndexCount)&&this.flush();let d=this.textureCache[c.name];d===void 0&&(16<=this.textureIndex+1&&this.flush(),this.textureCache[c.name]=d=this.textureIndex,c.bind(this.textureIndex++));const e=this.vertexCount*HB.vertexStride;HB.vertices[e]=a[0],HB.vertices[e+1]=a[1],HB.vertices[e+2]=0,HB.vertices[e+3]=1,HB.vertices[e+4]=1,HB.vertices[e+5]=1,HB.vertices[e+6]=1,HB.vertices[e+7]=0,HB.vertices[e+8]=0,HB.vertices[e+9]=d,HB.vertices[e+10]=0,HB.vertices[e+11]=a[0]+b[0],HB.vertices[e+12]=a[1],HB.vertices[e+13]=0,HB.vertices[e+14]=1,HB.vertices[e+15]=1,HB.vertices[e+16]=1,HB.vertices[e+17]=1,HB.vertices[e+18]=1,HB.vertices[e+19]=0,HB.vertices[e+20]=d,HB.vertices[e+21]=0,HB.vertices[e+22]=a[0]+b[0],HB.vertices[e+23]=a[1]+b[1],HB.vertices[e+24]=0,HB.vertices[e+25]=1,HB.vertices[e+26]=1,HB.vertices[e+27]=1,HB.vertices[e+28]=1,HB.vertices[e+29]=1,HB.vertices[e+30]=1,HB.vertices[e+31]=d,HB.vertices[e+32]=0,HB.vertices[e+33]=a[0],HB.vertices[e+34]=a[1]+b[1],HB.vertices[e+35]=0,HB.vertices[e+36]=1,HB.vertices[e+37]=1,HB.vertices[e+38]=1,HB.vertices[e+39]=1,HB.vertices[e+40]=0,HB.vertices[e+41]=1,HB.vertices[e+42]=d,HB.vertices[e+43]=0,HB.indices[this.indexCount]=this.vertexCount,HB.indices[this.indexCount+1]=this.vertexCount+1,HB.indices[this.indexCount+2]=this.vertexCount+2,HB.indices[this.indexCount+3]=this.vertexCount+2,HB.indices[this.indexCount+4]=this.vertexCount+3,HB.indices[this.indexCount+5]=this.vertexCount,this.vertexCount+=4,this.indexCount+=6}drawColoredLine(a,b,c,d){(this.vertexCount+4>=HB.maxVertexCount||this.indexCount+6>=HB.maxIndexCount)&&this.flush();const f=HB.Vec2.angleBetweenVec2(a,b),g=HB.Vec2.fromAngle(f-e/2,c/2),h=HB.Vec2.fromAngle(f+e/2,c/2),i=this.vertexCount*HB.vertexStride;HB.vertices[i]=a[0]-g[0],HB.vertices[i+1]=a[1]-g[1],HB.vertices[i+2]=0,HB.vertices[i+3]=d[0],HB.vertices[i+4]=d[1],HB.vertices[i+5]=d[2],HB.vertices[i+6]=d[3],HB.vertices[i+7]=0,HB.vertices[i+8]=0,HB.vertices[i+9]=0,HB.vertices[i+10]=0,HB.vertices[i+11]=a[0]+g[0],HB.vertices[i+12]=a[1]+g[1],HB.vertices[i+13]=0,HB.vertices[i+14]=d[0],HB.vertices[i+15]=d[1],HB.vertices[i+16]=d[2],HB.vertices[i+17]=d[3],HB.vertices[i+18]=1,HB.vertices[i+19]=0,HB.vertices[i+20]=0,HB.vertices[i+21]=0,HB.vertices[i+22]=b[0]-h[0],HB.vertices[i+23]=b[1]-h[1],HB.vertices[i+24]=0,HB.vertices[i+25]=d[0],HB.vertices[i+26]=d[1],HB.vertices[i+27]=d[2],HB.vertices[i+28]=d[3],HB.vertices[i+29]=1,HB.vertices[i+30]=1,HB.vertices[i+31]=0,HB.vertices[i+32]=0,HB.vertices[i+33]=b[0]+h[0],HB.vertices[i+34]=b[1]+h[1],HB.vertices[i+35]=0,HB.vertices[i+36]=d[0],HB.vertices[i+37]=d[1],HB.vertices[i+38]=d[2],HB.vertices[i+39]=d[3],HB.vertices[i+40]=0,HB.vertices[i+41]=1,HB.vertices[i+42]=0,HB.vertices[i+43]=0,HB.indices[this.indexCount]=this.vertexCount,HB.indices[this.indexCount+1]=this.vertexCount+1,HB.indices[this.indexCount+2]=this.vertexCount+2,HB.indices[this.indexCount+3]=this.vertexCount+2,HB.indices[this.indexCount+4]=this.vertexCount+3,HB.indices[this.indexCount+5]=this.vertexCount,this.vertexCount+=4,this.indexCount+=6}drawColoredText(a,b,c=12,d="start-start",e){let f=this.textureCache[HB.font.name];void 0===f&&(16<=this.textureIndex+1&&this.flush(),this.textureCache[HB.font.name]=f=this.textureIndex,HB.font.bind(this.textureIndex++));const g=[],h={};c/=HB.fontData.info.size;let i=0;const j=HB.fontData.info.size*c;let k;for(const f of a)for(const a of Object.values(HB.fontData.chars))if(a.char===f){if(void 0!==k)for(const b of Object.values(HB.fontData.kernings))if(b[0]===k&&b[1]===a.id){i+=b.amt*c,h[a.id]=b;break}k=a.id,g.push(a),i+=a.xadv*c;break}let l=0,m=0;switch(d=d.split("-"),d[0]){case"start":break;case"center":l=-i/2;break;case"end":l=-i;}switch(d[1]){case"start":break;case"center":m=-j/2;break;case"end":m=-j;}g.forEach(a=>{(this.vertexCount+4>=HB.maxVertexCount||this.indexCount+6>=HB.maxIndexCount)&&this.flush(),void 0!==h[a.id]&&(b[0]+=h[a.id].amt*c);const d=this.vertexCount*HB.vertexStride;HB.vertices[d]=b[0]+a.xoff*c+l,HB.vertices[d+1]=b[1]+a.yoff*c+m,HB.vertices[d+2]=0,HB.vertices[d+3]=e[0],HB.vertices[d+4]=e[1],HB.vertices[d+5]=e[2],HB.vertices[d+6]=e[3],HB.vertices[d+7]=a.x/HB.fontData.common.scaleW,HB.vertices[d+8]=a.y/HB.fontData.common.scaleH,HB.vertices[d+9]=f,HB.vertices[d+10]=c,HB.vertices[d+11]=b[0]+(a.w+a.xoff)*c+l,HB.vertices[d+12]=b[1]+a.yoff*c+m,HB.vertices[d+13]=0,HB.vertices[d+14]=e[0],HB.vertices[d+15]=e[1],HB.vertices[d+16]=e[2],HB.vertices[d+17]=e[3],HB.vertices[d+18]=(a.x+a.w)/HB.fontData.common.scaleW,HB.vertices[d+19]=a.y/HB.fontData.common.scaleH,HB.vertices[d+20]=f,HB.vertices[d+21]=c,HB.vertices[d+22]=b[0]+(a.w+a.xoff)*c+l,HB.vertices[d+23]=b[1]+(a.h+a.yoff)*c+m,HB.vertices[d+24]=0,HB.vertices[d+25]=e[0],HB.vertices[d+26]=e[1],HB.vertices[d+27]=e[2],HB.vertices[d+28]=e[3],HB.vertices[d+29]=(a.x+a.w)/HB.fontData.common.scaleW,HB.vertices[d+30]=(a.y+a.h)/HB.fontData.common.scaleH,HB.vertices[d+31]=f,HB.vertices[d+32]=c,HB.vertices[d+33]=b[0]+a.xoff*c+l,HB.vertices[d+34]=b[1]+(a.h+a.yoff)*c+m,HB.vertices[d+35]=0,HB.vertices[d+36]=e[0],HB.vertices[d+37]=e[1],HB.vertices[d+38]=e[2],HB.vertices[d+39]=e[3],HB.vertices[d+40]=a.x/HB.fontData.common.scaleW,HB.vertices[d+41]=(a.y+a.h)/HB.fontData.common.scaleH,HB.vertices[d+42]=f,HB.vertices[d+43]=c,HB.indices[this.indexCount]=this.vertexCount,HB.indices[this.indexCount+1]=this.vertexCount+1,HB.indices[this.indexCount+2]=this.vertexCount+2,HB.indices[this.indexCount+3]=this.vertexCount+2,HB.indices[this.indexCount+4]=this.vertexCount+3,HB.indices[this.indexCount+5]=this.vertexCount,this.vertexCount+=4,this.indexCount+=6,b[0]+=a.xadv*c})}flush(){HB.vertexBuffer.partialWrite(HB.vertices,this.vertexCount*HB.vertexStride),HB.indexBuffer.partialWrite(HB.indices,this.indexCount),HB.renderer.draw(this.indexCount),this.reset()}},Shader:class{constructor(a,b){this.vertexShaderSource=a||`#version 300 es
					in vec4 aVertexPosition;
					in vec4 aVertexColor;
					in vec2 aTexturePosition;
					in float aTextureId;
					in float aTextSize;

					out vec4 vVertexColor;
					out vec2 vTexturePosition;
					out float vTextureId;
					out float vTextSize;

					uniform mat4 uMVP;

					void main() {
						gl_Position = uMVP * aVertexPosition;
						vVertexColor = aVertexColor;
						vTexturePosition = aTexturePosition;
						vTextureId = aTextureId;
						vTextSize = aTextSize;
					}
				`,this.fragmentShaderSource=b||`#version 300 es
					precision mediump float;
					in vec4 vVertexColor;
					in vec2 vTexturePosition;
					in float vTextureId;
					in float vTextSize;

					uniform sampler2D uTextureIds[16];

					out vec4 pixelColor;

					void main() {
						vec4 texSample;
						switch(int(vTextureId)) {
							case 0: texSample = texture(uTextureIds[0], vTexturePosition); break;
							case 1: texSample = texture(uTextureIds[1], vTexturePosition); break;
							case 2: texSample = texture(uTextureIds[2], vTexturePosition); break;
							case 3: texSample = texture(uTextureIds[3], vTexturePosition); break;
							case 4: texSample = texture(uTextureIds[4], vTexturePosition); break;
							case 5: texSample = texture(uTextureIds[5], vTexturePosition); break;
							case 6: texSample = texture(uTextureIds[6], vTexturePosition); break;
							case 7: texSample = texture(uTextureIds[7], vTexturePosition); break;
							case 8: texSample = texture(uTextureIds[8], vTexturePosition); break;
							case 9: texSample = texture(uTextureIds[9], vTexturePosition); break;
							case 10: texSample = texture(uTextureIds[10], vTexturePosition); break;
							case 11: texSample = texture(uTextureIds[11], vTexturePosition); break;
							case 12: texSample = texture(uTextureIds[12], vTexturePosition); break;
							case 13: texSample = texture(uTextureIds[13], vTexturePosition); break;
							case 14: texSample = texture(uTextureIds[14], vTexturePosition); break;
							case 15: texSample = texture(uTextureIds[15], vTexturePosition); break;
						}
						if(vTextSize <= 0.0) {
							pixelColor = texSample * vVertexColor;
						} else {
							float sigDist = max(min(texSample.r, texSample.g), min(max(texSample.r, texSample.g), texSample.b)) - 0.5;
							float alpha = clamp(sigDist/fwidth(sigDist) + 0.4, 0.0, 1.0);
							pixelColor = vec4(vVertexColor.rgb, alpha * vVertexColor.a);
						}
					}
				`,this.id=this.createProgram(this.vertexShaderSource,this.fragmentShaderSource),this.attribLocationCache={},this.uniformLocationCache={}}createProgram(a,b){const c=HB.gl.createProgram(),d=this.compileShader(HB.gl.VERTEX_SHADER,a),e=this.compileShader(HB.gl.FRAGMENT_SHADER,b);return HB.gl.attachShader(c,d),HB.gl.attachShader(c,e),HB.gl.linkProgram(c),HB.gl.validateProgram(c),HB.gl.deleteShader(d),HB.gl.deleteShader(e),c}compileShader(a,b){const c=HB.gl.createShader(a);return HB.gl.shaderSource(c,b),HB.gl.compileShader(c),!1===HB.gl.getShaderParameter(c,HB.gl.COMPILE_STATUS)?(console.error(HB.gl.getShaderInfoLog(c)),HB.gl.deleteShader(c),null):c}getAttribLocation(a){return void 0===this.attribLocationCache[a]&&(this.attribLocationCache[a]=HB.gl.getAttribLocation(this.id,a)),this.attribLocationCache[a]}getUniformLocation(a){return void 0===this.uniformLocationCache[a]&&(this.uniformLocationCache[a]=HB.gl.getUniformLocation(this.id,a)),this.uniformLocationCache[a]}setUniform(a,b,c){HB.gl["uniform"+c.length+a](this.getUniformLocation(b),c[0],c[1],c[2],c[3])}setUniformArray(a,b,c,d=1){HB.gl["uniform"+d+a+"v"](this.getUniformLocation(b),c)}setUniformMatrix(a,b,c){HB.gl["uniformMatrix"+d(c.length)+a+"v"](this.getUniformLocation(b),!0,c)}bind(){HB.gl.useProgram(this.id)}unbind(){HB.gl.useProgram(null)}delete(){this.unbind(),HB.gl.deleteProgram(this.id)}},VertexBuffer:class{constructor(a){this.type=HB.gl.ARRAY_BUFFER,this.id=HB.gl.createBuffer(),this.bind(),HB.gl.bufferData(this.type,a,HB.gl.DYNAMIC_DRAW)}write(a){HB.gl.bufferSubData(this.type,0,a)}partialWrite(a,b){HB.gl.bufferSubData(this.type,0,a,0,b)}bind(){HB.gl.bindBuffer(this.type,this.id)}unbind(){HB.gl.bindBuffer(this.type,null)}delete(){this.unbind(),HB.gl.deleteBuffer(this.id)}},IndexBuffer:class{constructor(a){this.type=HB.gl.ELEMENT_ARRAY_BUFFER,this.id=HB.gl.createBuffer(),this.bind(),HB.gl.bufferData(this.type,a,HB.gl.DYNAMIC_DRAW)}write(a){HB.gl.bufferSubData(this.type,0,a)}partialWrite(a,b){HB.gl.bufferSubData(this.type,0,a,0,b)}bind(){HB.gl.bindBuffer(this.type,this.id)}unbind(){HB.gl.bindBuffer(this.type,null)}delete(){this.unbind(),HB.gl.deleteBuffer(this.id)}},VertexArray:class{constructor(){this.id=HB.gl.createVertexArray(),HB.gl.bindVertexArray(this.id);this.layout=new class{constructor(){this.elements=[],this.stride=0,HB.vertexStride=0}add(a,b,c,d=!1){HB.vertexStride+=c;const e=HB.shader.getAttribLocation(a);return-1!==e&&this.elements.push({index:e,type:b,count:c,normalized:d}),this.stride+=c*HB.bytes(b),e}clear(){this.elements=[],this.stride=0}}}addBuffer(a){this.bind(),a.bind();let b=0;this.layout.elements.forEach(a=>{HB.gl.enableVertexAttribArray(a.index),HB.gl.vertexAttribPointer(a.index,a.count,a.type,a.normalized,this.layout.stride,b),b+=a.count*HB.bytes(a.type)})}bind(){HB.gl.bindVertexArray(this.id)}unbind(){HB.gl.bindVertexArray(null)}delete(){this.unbind(),HB.vertexArray.layout.elements.forEach(a=>HB.gl.disableVertexAttribArray(a.index)),HB.gl.deleteVertexArray(this.id)}},Texture:class{constructor(a,b,c=HB.textures,d=function(){console.log("Texture loaded: "+this.name)}){this.id=HB.gl.createTexture(),this.createTexture(b),this.name=a,c===void 0?HB.textures[this.name]=this:Array.isArray(c)?c.push(this):c instanceof Object&&(c[this.name]=this),this.onLoadCallback=d}setErrorTexture(){const a=new Uint8Array([255,255,255,255,191,191,191,255,191,191,191,255,255,255,255,255]);this.setTextureParameters(HB.gl.NEAREST,HB.gl.REPEAT),HB.gl.texImage2D(HB.gl.TEXTURE_2D,0,HB.gl.RGBA8,2,2,0,HB.gl.RGBA,HB.gl.UNSIGNED_BYTE,a)}createTexture(a){if(this.bind(),this.setErrorTexture(),void 0===a)return;const b=new Image;b.onload=()=>{this.bind(),this.setTextureParameters(HB.gl.LINEAR,HB.gl.CLAMP_TO_EDGE),HB.gl.texImage2D(HB.gl.TEXTURE_2D,0,HB.gl.RGBA8,HB.gl.RGBA,HB.gl.UNSIGNED_BYTE,b),this.onLoadCallback()},b.src=a}setTextureParameters(a,b){HB.gl.texParameteri(HB.gl.TEXTURE_2D,HB.gl.TEXTURE_MIN_FILTER,a),HB.gl.texParameteri(HB.gl.TEXTURE_2D,HB.gl.TEXTURE_MAG_FILTER,a),HB.gl.texParameteri(HB.gl.TEXTURE_2D,HB.gl.TEXTURE_WRAP_S,b),HB.gl.texParameteri(HB.gl.TEXTURE_2D,HB.gl.TEXTURE_WRAP_T,b)}bind(a=1){HB.gl.activeTexture(HB.gl["TEXTURE"+a]),HB.gl.bindTexture(HB.gl.TEXTURE_2D,this.id)}unbind(){HB.gl.bindTexture(HB.gl.TEXTURE_2D,null)}delete(){this.unbind(),HB.gl.deleteTexture(this.id)}},bytes:function(a){return a===HB.gl.FLOAT||a===HB.gl.UNSIGNED_INT?4:a===HB.gl.BYTE?1:void 0},loadFile:function(a,b,c){return fetch(a,{method:"GET"}).then(a=>a[b]()).then(a=>{c(a)}).catch(),{data:"",path:a}},Math:class{constructor(){new HB.Vec2,new HB.Vec3,new HB.Vec4}static radians(a){return a*(e/180)}static degrees(a){return a*(180/e)}static map(a,b,c,d,e){return d+(e-d)*(a-b)/(c-b)}static random(a,b){return void 0===b?void 0===a?Math.random():Math.random()*a:Math.random()*(b-a)+a}static randomInt(a,b){return c(HB.Math.random(a,b))}static lerp(a,b,c){return a+c*(b-a)}static constrain(a,b,c){return a>c?c:a<b?b:a}static wrap(a,b,c){return a>c?b:a<b?c:a}static rectRectCollision(a,b,c,d){var e=Math.abs;return 2*e(a[0]+b[0]/2-(c[0]+d[0]/2))<b[0]+d[0]&&2*e(a[1]+b[1]/2-(c[1]+d[1]/2))<b[1]+d[1]}},Noise:class{constructor(a=1,b=.05){this.vertices=256,this.amp=a,this.scl=b,this.r=[];for(let c=0;c<this.vertices;c++)this.r.push(Math.random())}value(a){const b=a*this.scl,d=c(b),e=b-d,f=d&this.vertices-1,g=f+1&this.vertices-1;return HB.Math.lerp(this.r[f],this.r[g],e*e*(3-2*e))*this.amp}},Mat4:class{static new(a=0){return[a,0,0,0,0,a,0,0,0,0,a,0,0,0,0,a]}static orthographic(a,b,c,d,e,f=-1,g=1){const h=c-b,i=d-e,j=g-f;a[0]=2/h,a[1]=0,a[2]=0,a[3]=-(c+b)/h,a[4]=0,a[5]=2/i,a[6]=0,a[7]=-(d+e)/i,a[8]=0,a[9]=0,a[10]=-2/j,a[11]=-(g+f)/j,a[12]=0,a[13]=0,a[14]=0,a[15]=1}static multMat4(a,b,c){const d=HB.Vec4.multMat4([c[0],c[1],c[2],c[3]],b),e=HB.Vec4.multMat4([c[4],c[5],c[6],c[7]],b),f=HB.Vec4.multMat4([c[8],c[9],c[10],c[11]],b),g=HB.Vec4.multMat4([c[12],c[13],c[14],c[15]],b);a[0]=d[0],a[1]=d[1],a[2]=d[2],a[3]=d[3],a[4]=e[0],a[5]=e[1],a[6]=e[2],a[7]=e[3],a[8]=f[0],a[9]=f[1],a[10]=f[2],a[11]=f[3],a[12]=g[0],a[13]=g[1],a[14]=g[2],a[15]=g[3]}static scale(a,b,c){HB.Mat4.multMat4(a,b,[c,0,0,0,0,c,0,0,0,0,c,0,0,0,0,1])}static translate(a,b,c){HB.Mat4.multMat4(a,b,[1,0,0,c[0],0,1,0,c[1],0,0,1,c[2],0,0,0,1])}static rotateX(c,d,e){HB.Mat4.multMat4(c,d,[1,0,0,0,0,b(-e),a(e),0,0,a(-e),b(-e),0,0,0,0,1])}static rotateY(c,d,e){HB.Mat4.multMat4(c,d,[b(-e),0,a(-e),0,0,1,0,0,a(e),0,b(-e),0,0,0,0,1])}static rotateZ(c,d,e){HB.Mat4.multMat4(c,d,[b(-e),a(e),0,0,a(-e),b(-e),0,0,0,0,1,0,0,0,0,1])}},Vec2:class{constructor(){HB.Vec2.zero=[0,0],HB.Vec2.one=[1,1]}static new(a=0,b=0){return[a,b]}static fromVec2(a){return[a[0],a[1]]}static fromAngle(c,d=1){return HB.Vec2.new(b(c)*d,a(c)*d)}static copy(a,b){a[0]=b[0],a[1]=b[1]}static set(a,b,c){a[0]=b,a[1]=c}static add(a,b,c=void 0){c===void 0?(a[0]+=b[0],a[1]+=b[1]):(a[0]+=b,a[1]+=c)}static mult(a,b,c=void 0){c===void 0?Array.isArray(b)?(a[0]*=b[0],a[1]*=b[1]):(a[0]*=b,a[1]*=b):(a[0]*=b,a[1]*=c)}static div(a,b,c=void 0){c===void 0?Array.isArray(b)?(a[0]/=b[0],a[1]/=b[1]):(a[0]/=b,a[1]/=b):(a[0]/=b,a[1]/=c)}static constrain(a,b,c,d,e){a[0]=HB.Math.constrain(a[0],b,c),a[1]=HB.Math.constrain(a[1],d,e)}static angleBetweenVec2(a,b){return Math.atan2(b[1]-a[1],b[0]-a[0])}static distBetweenVec2(a,b){return d((b[0]-a[0])*(b[0]-a[0])+(b[1]-a[1])*(b[1]-a[1]))}static collidesRect(a,b,c){return a[0]<b[0]+c[0]&&a[0]>b[0]&&a[1]<b[1]+c[1]&&a[1]>b[1]}},Vec3:class{constructor(){HB.Vec3.zero=[0,0,0],HB.Vec3.one=[1,1,1]}static new(a=0,b=0,c=0){return[a,b,c]}},Vec4:class{constructor(){HB.Vec4.zero=[0,0,0,0],HB.Vec4.one=[1,1,1,1],HB.Vec4.colors={},HB.Vec4.colors.white=[1,1,1,1],HB.Vec4.colors.black=[0,0,0,1],HB.Vec4.colors.red=[1,0,0,1],HB.Vec4.colors.green=[0,1,0,1],HB.Vec4.colors.blue=[0,0,1,1],HB.Vec4.colors.yellow=[1,1,0,1],HB.Vec4.colors.cyan=[0,1,1,1],HB.Vec4.colors.magenta=[1,0,1,1]}static new(a=0,b=0,c=0,d=0){return[a,b,c,d]}static multVec4(a,b){return[a[0]*b[0],a[1]*b[1],a[2]*b[2],a[3]*b[3]]}static multMat4(a,b){return[a[0]*b[0]+a[1]*b[4]+a[2]*b[8]+a[3]*b[12],a[0]*b[1]+a[1]*b[5]+a[2]*b[9]+a[3]*b[13],a[0]*b[2]+a[1]*b[6]+a[2]*b[10]+a[3]*b[14],a[0]*b[3]+a[1]*b[7]+a[2]*b[11]+a[3]*b[15]]}}}}(),window.addEventListener("load",HB.setup);